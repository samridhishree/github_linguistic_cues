Unnamed: 0,rectype,issueid,project_owner,project_name,actor,time,text,action,title
3,issue_comment,228,nilearn,nilearn,AlexandreAbraham,2014-07-25 14:11:36,"I thought that you were going to fix it. Do you want me to do it?
",nan,nan
4,issue_comment,228,nilearn,nilearn,GaelVaroquaux,2014-09-15 12:52:48,"> Closed #228 via 2959974.

Thanks!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,238,nilearn,nilearn,lesteve,2014-10-28 08:38:24,"@AlexandreAbraham I guess this will be tackled by #262 or did you have anything else in mind?
",nan,nan
4,issue_comment,238,nilearn,nilearn,AlexandreAbraham,2014-10-28 11:27:49,"No, #262 solves it. I close.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,pull_request_commit_comment,239,nilearn,nilearn,GaelVaroquaux,2014-09-22 09:41:58,"Is there a good reason to use this function, or can we use np.recfromcsv, which would avoid importing from matplotlib?
",79a4acc41d8aac16d4f6e6aa5c3f51bffc51cece,"(196, '', u'nilearn/datasets.py')"
6,pull_request_commit_comment,239,nilearn,nilearn,AlexandreAbraham,2014-09-22 15:04:18,"Yes, unfortunately. The CSV file contains a ""comment"" column with strings (quoted text) and these strings contain commas. Unfortunately, AFAIK, numpy is not able to read CSV with strings containing commas.
",79a4acc41d8aac16d4f6e6aa5c3f51bffc51cece,"(196, '', u'nilearn/datasets.py')"
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,235,nilearn,nilearn,AlexandreAbraham,2014-09-10 16:11:30,"Isn't there a bug on line 158 of canica.py? Shouldn't it be `rs` instead of `random_state`?
",nan,nan
4,issue_comment,235,nilearn,nilearn,GaelVaroquaux,2014-09-10 16:14:41,"No, it's fine, because we are not forking, for now. Thus we are simply passing a RNG, and more data is drawn from this RNG.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
8,pull_request_commit_comment,236,nilearn,nilearn,lesteve,2014-09-11 14:40:56,"Open to better documentation wording
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/find_cuts.py')"
9,pull_request_commit_comment,236,nilearn,nilearn,lesteve,2014-09-11 14:42:20,"Have to use such a high tolerance to get the test to pass. Here is the error with rtol=4e-2

Not equal to tolerance rtol=0.04, atol=0

(mismatch 100.0%)
x: array([ 49.5, 9.5, 39.5])
y: array([50, 10, 40])
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/test/test_find_cuts.py')"
10,pull_request_commit_comment,236,nilearn,nilearn,lesteve,2014-09-11 14:42:45,"Same remark about tolerance as above
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/test/test_find_cuts.py')"
11,pull_request_commit_comment,236,nilearn,nilearn,GaelVaroquaux,2014-09-11 14:47:34,"This should be an inline comment in the code, not something on github: on github it will be lost.
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/test/test_find_cuts.py')"
5,issue_comment,236,nilearn,nilearn,GaelVaroquaux,2014-09-11 14:54:04,"Could you:
- Add the function in plotting/**init**.py: let's make it public, it's useful
- Add it in doc/modules/references.rst
",nan,nan
12,pull_request_commit_comment,236,nilearn,nilearn,lesteve,2014-09-11 15:14:25,"yep
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/test/test_find_cuts.py')"
6,issue_comment,236,nilearn,nilearn,bthirion,2014-09-12 06:26:58,"LGTM
",nan,nan
13,pull_request_commit_comment,236,nilearn,nilearn,bthirion,2014-09-12 06:28:20,"Maybe: The statistical map to be displayed 
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/find_cuts.py')"
14,pull_request_commit_comment,236,nilearn,nilearn,GaelVaroquaux,2014-09-12 06:59:03,"Indeed. Or even better ""brain map"" as the function is generic and not only for statistical maps. 

<div>-------- Original message --------</div><div>From: bthirion notifications@github.com </div><div>Date:12/09/2014  08:28  (GMT+01:00) </div><div>To: nilearn/nilearn nilearn@noreply.github.com </div><div>Cc: Gael Varoquaux gael.varoquaux@normalesup.org </div><div>Subject: Re: [nilearn] Tweak find_xyz_cut_coords to take an niimg as argument
  and return world (rather than voxel) coordinates (#236) </div><div>
</div>In nilearn/plotting/find_cuts.py:

> ```
>  """""" Find the center of the largest activation connected component.
> 
>      Parameters
>      -----------
> ```
> -        data : 3D ndarray
> -            The activation map, as a 3D numpy array.
> -        img : 3D Nifti1Image
> -            The activation map data.
>   Maybe: The statistical map to be displayed

—
Reply to this email directly or view it on GitHub.
",3548e80a04cfedcd1e4ecb9668a440f2e0c2f438,"(None, '', u'nilearn/plotting/find_cuts.py')"
7,issue_comment,236,nilearn,nilearn,GaelVaroquaux,2014-09-15 09:10:47,"LGTM. Feel free to merge.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
10,pull_request_commit_comment,237,nilearn,nilearn,lesteve,2014-09-12 13:36:58,"This is the most controversial change. The --pylab flag will be removed for IPython **notebook** on IPython 3.0 and is discouraged for other front-ends. Not sure about bog-standard IPython to be entirely fair, but I tend to agree with the general opinion that putting so many things in the main namespace (and shadowing builtins while we are at it like sum and all) is never a great idea.

On top of that I didn't look extensively but I could not find a place in the doc that actually relied on accessing functions that  --pylab puts in the main namespace.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(61, '', u'doc/introduction.rst')"
5,issue_comment,237,nilearn,nilearn,bthirion,2014-09-16 12:31:21,"Nihil obtsat.
",nan,nan
6,issue_comment,237,nilearn,nilearn,lesteve,2014-10-20 12:24:03,"@AlexandreAbraham @GaelVaroquaux @bthirion I think I am done with my first pass on the doc. Any comments let me know.
",nan,nan
11,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 18:18:09,"Faux ami: I believe that the proper English wording here is to ""warrant"".
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(5, '', u'AUTHORS.rst')"
12,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 18:19:29,"Same comment.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(5, '', u'doc/AUTHORS.rst')"
13,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 18:43:55,"You're loosing a bit the focus of the sentence: standardizing is almost always needed, smoothing is often useful, but not always.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(None, '', u'doc/building_blocks/estimator_choice.rst')"
14,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 19:06:47,"I am OK with this change. It is good practice.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(61, '', u'doc/introduction.rst')"
7,issue_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 19:08:14,"Aside the few minor comments above, +1 for merge!
",nan,nan
15,pull_request_commit_comment,237,nilearn,nilearn,lesteve,2014-10-20 19:22:16,"""guarantee the future"" seems to win the google battle against ""warrant the future"". Also this [link](http://www.linguee.com/english-french/search?source=auto&query=%22garantir+le+futur%22) shows a few occurrences from the European parliament, which hopefully hires translators we can trust.

Otherwise the same link has something like ""to (help) ensure the future"" if you like it better.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(5, '', u'AUTHORS.rst')"
16,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 19:25:57,"> ""guarantee the future"" seems to win the google battle against ""warrant the
> future"". Also this link shows a few occurrences from the European parliament,
> which hopefully hires translators we can trust.

OK, point taken.

> Otherwise the same link has something like ""to (help) ensure the
> future"" if you like it better.

It seems to sound better to my ears, but whatever the european parliement
says is good!
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(5, '', u'AUTHORS.rst')"
17,pull_request_commit_comment,237,nilearn,nilearn,lesteve,2014-10-20 19:28:10,"I am more than happy to keep the previous phrasing but then you have to help me finish the sentence:
Typically: standardizing the data is important, smoothing can often be useful, and removing confounding effects **what?**.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(None, '', u'doc/building_blocks/estimator_choice.rst')"
18,pull_request_commit_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 19:31:38,"> Typically: standardizing the data is important, smoothing can often be useful,
> and removing confounding effects what?.

and confounding effects, such as a session effect, must be removed.

Is that good with you?
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(None, '', u'doc/building_blocks/estimator_choice.rst')"
19,pull_request_commit_comment,237,nilearn,nilearn,lesteve,2014-10-20 20:07:48,"Perfectly fine with me, I have just pushed the changes.
",a6c8b5527db4ef600a9a4012cf39c6d392080665,"(None, '', u'doc/building_blocks/estimator_choice.rst')"
8,issue_comment,237,nilearn,nilearn,bthirion,2014-10-20 20:10:32,"+1 for merge.
",nan,nan
9,issue_comment,237,nilearn,nilearn,GaelVaroquaux,2014-10-20 20:32:44,"Merged. Thanks Loic!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,230,nilearn,nilearn,AlexandreAbraham,2014-09-15 12:43:46,"The sooner the better then.
",nan,nan
4,issue_comment,230,nilearn,nilearn,GaelVaroquaux,2014-09-15 12:44:31,"> The sooner the better then.

Go for it. I am shuffling between emergencies.
",nan,nan
5,issue_comment,230,nilearn,nilearn,AlexandreAbraham,2014-09-15 12:45:13,"Should I do it straight or should we maintain the mask parameter for some time and raise a warning?
",nan,nan
6,issue_comment,230,nilearn,nilearn,GaelVaroquaux,2014-09-15 12:51:46,"> Should I do it straight or should we maintain the mask parameter for some time
> and raise a warning?

No, do it, and send an email to the parietal mailing list. There will be
a clear-cut error, not something silent.

G
",nan,nan
7,issue_comment,230,nilearn,nilearn,AlexandreAbraham,2014-09-16 13:04:33,"Fixed by 0273dc68e70649c7ffcd50aa954ff5cc293012b0
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,232,nilearn,nilearn,AlexandreAbraham,2014-09-10 15:34:27,":+1: 
",nan,nan
6,issue_comment,232,nilearn,nilearn,GaelVaroquaux,2014-09-10 15:36:36,"Quite clearly I am not receiving all the github email that I should be: I hadn't gotten a mail for this PR. I'll look at it ASAP.
",nan,nan
8,pull_request_commit_comment,232,nilearn,nilearn,GaelVaroquaux,2014-09-10 15:50:23,"We try to avoid doing such a systematic replacement of trailing whitespace. This is the kind of things that gives merge conflicts for no good reason.

My personal rule is that if I modify a line of code, I clean up the trailing whitespace.
",33f395e7c711d4bfbb0a10a9c4f16409cbbaedbc,"(4, '', u'doc/building_blocks/data_preparation.rst')"
9,pull_request_commit_comment,232,nilearn,nilearn,GaelVaroquaux,2014-09-10 15:54:45,"Good catch. I am surprised that this passed the doctests.
",33f395e7c711d4bfbb0a10a9c4f16409cbbaedbc,"(65, '', u'doc/building_blocks/manipulating_mr_images.rst')"
10,pull_request_commit_comment,232,nilearn,nilearn,AlexandreAbraham,2014-09-10 15:56:54,"`...` are valid in doctest.
",33f395e7c711d4bfbb0a10a9c4f16409cbbaedbc,"(65, '', u'doc/building_blocks/manipulating_mr_images.rst')"
11,pull_request_commit_comment,232,nilearn,nilearn,GaelVaroquaux,2014-09-10 15:59:05,"Yes, but I didn't know that the absence of '...' was valid.
",33f395e7c711d4bfbb0a10a9c4f16409cbbaedbc,"(65, '', u'doc/building_blocks/manipulating_mr_images.rst')"
7,issue_comment,232,nilearn,nilearn,GaelVaroquaux,2014-09-10 15:59:19,"OK, LGTM. Merging. Thanks
",nan,nan
12,pull_request_commit_comment,232,nilearn,nilearn,AlexandreAbraham,2014-09-10 16:02:58,"Okay, I misread the diff. I didn't know either.
",33f395e7c711d4bfbb0a10a9c4f16409cbbaedbc,"(65, '', u'doc/building_blocks/manipulating_mr_images.rst')"
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,124,nilearn,nilearn,GaelVaroquaux,2013-11-05 12:42:53,"> I don't like the default param standardize=True, because this leads to weird
> behaviour on some kinds of images (variance, stats). Would people mind to
> change it to False ?

No. But please update all the scripts that use it.
",nan,nan
4,issue_comment,124,nilearn,nilearn,AlexandreAbraham,2014-09-16 13:21:51,"Fixed a while ago in c09f485348c7625dbfbdee45d9e37534a8c88192.
Closing.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
13,pull_request_commit_comment,240,nilearn,nilearn,AlexandreAbraham,2014-05-29 17:56:04,"Isn't that going to fail if confounds is None? Because I have no good solution for this problem, I sometimes instantiate a list of None values.
",8448c7a3e3851395d91eff10c493c1a36d581119,"(5, 276, u'nilearn/decomposition/multi_pca.py')"
14,pull_request_commit_comment,240,nilearn,nilearn,GaelVaroquaux,2014-05-29 18:01:15,"> Isn't that going to fail if confounds is None?

Good point. It was a quick hack while I was working on a problem.

> Because I have no good solution for this problem, I sometimes
> instantiate a list of None values.

Sounds like a good solution. We need to work on this during the sprint.
",8448c7a3e3851395d91eff10c493c1a36d581119,"(5, 276, u'nilearn/decomposition/multi_pca.py')"
4,issue_comment,240,nilearn,nilearn,AlexandreAbraham,2014-09-15 13:02:50,"LGTM. If you merge it, ping me so I fix the little bug I've spotted. Or I can make a PR on your branch but that would be a waste of time I think.
",nan,nan
5,issue_comment,240,nilearn,nilearn,lesteve,2014-09-15 13:53:52,"It seems like the the tests are broken because confounds is None by default in MultiPCA.fit so you have problem where you try to iterate in https://github.com/GaelVaroquaux/nilearn/blob/better_pca/nilearn/decomposition/multi_pca.py#L276.

That was already noted in
https://github.com/GaelVaroquaux/nilearn/commit/8448c7a3e3851395d91eff10c493c1a36d581119

I guess you could do something like:

``` python
if confounds is None:
    confounds = [None] * len(niimgs)
```

The merge conflict is very easy to resolve, in case that's what you were asking for.

For completeness, here is the traceback of one of the failing tests:

```
~/code/nilearn $ nosetests nilearn/decomposition/tests/test_canica.py --ipdb
nilearn.decomposition.tests.test_canica.test_canica_square_img ... /home/lesteve/code/nilearn/nilearn/input_data/multi_nifti_masker.py:194: UserWarning: [MultiNiftiMasker.fit] Generation of a mask has been requested (niimgs != None) while a mask has been provided at masker creation. Given mask will be used.
  ' will be used.' % self.__class__.__name__)

- TRACEBACK --------------------------------------------------------------------
Traceback (most recent call last):
  File ""/home/lesteve/anaconda/lib/python2.7/unittest/case.py"", line 329, in run
    testMethod()
  File ""/home/lesteve/anaconda/lib/python2.7/site-packages/nose/case.py"", line 197, in runTest
    self.test(*self.arg)
  File ""/home/lesteve/code/nilearn/nilearn/decomposition/tests/test_canica.py"", line 49, in test_canica_square_img
    canica.fit(data)
  File ""/home/lesteve/code/nilearn/nilearn/decomposition/canica.py"", line 147, in fit
    MultiPCA.fit(self, niimgs, y=y, confounds=confounds)
  File ""/home/lesteve/code/nilearn/nilearn/decomposition/multi_pca.py"", line 276, in fit
    for niimg, confound in zip(niimgs, confounds))
TypeError: zip argument #2 must support iteration
--------------------------------------------------------------------------------
> /home/lesteve/code/nilearn/nilearn/decomposition/multi_pca.py(276)fit()
    275             )
--> 276             for niimg, confound in zip(niimgs, confounds))
    277         subject_pcas, subject_svd_vals = zip(*subject_pcas)

ipdb> l
    271                 memory=self.memory,
    272                 ref_memory_level=self.memory_level,
    273                 confounds=confounds,
    274                 verbose=self.verbose
    275             )
--> 276             for niimg, confound in zip(niimgs, confounds))
    277         subject_pcas, subject_svd_vals = zip(*subject_pcas)
    278 
    279         if len(niimgs) > 1:
    280             if not self.do_cca:
    281                 for subject_pca, subject_svd_val in \

ipdb> confounds
ipdb> q
```
",nan,nan
6,issue_comment,240,nilearn,nilearn,AlexandreAbraham,2014-09-16 13:19:14,"As you said, I already raised this problem. But I think that we should not make this PR wait any longer.

@GaelVaroquaux, can you rebase your PR and/or fix the little problem we raised? If you have no time, just do the minimum and I will fix the rest. Apart from that problem, I tested your code and for me everything is fine.

I can also make you a PR or cherrypick the commits. But I'd like to avoid that because it would take more time.
",nan,nan
7,issue_comment,240,nilearn,nilearn,lesteve,2014-10-02 12:11:27,"This has been moved to #251.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,224,nilearn,nilearn,bthirion,2014-07-09 21:24:33,"A general remark: you do not document the use of these environment variables, so that the user does not know what he/she has to do. Please update the documentation.
",nan,nan
6,issue_comment,224,nilearn,nilearn,AlexandreAbraham,2014-07-21 12:18:10,"@bthirion I added the global variable to the documentation and I also quickly evoked our usage pattern (having one read-only repository). Any other comment?

I also renamed the GLOBAL_NILEARN_DATA to NILEARN_SHARED.

Ping @GaelVaroquaux 
",nan,nan
7,issue_comment,224,nilearn,nilearn,bthirion,2014-07-21 22:01:58,"LGTM. Maybe we could be even more explicit for end users.
""If the NILEARN_SHARED variable is set, this is where the data is going to land. Otherwiase, set the NILEARN_DATA to any path where you would like to install the data. If None is set, then...""
",nan,nan
14,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:23:35,"""3 simple ways"" on l.18 should be replaced by ""4 simple ways"". You may need to expand the diff to see what I mean. Not sure whether there is a better way to comment on lines that are not part of the patch with github.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(3, '', u'doc/developers/dataset_download.rst')"
15,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:26:26,"There is a missing space at the end of each string

```
('asdf'
 'ASDF')
==
'asdfASDF'
```

Also aligning vertically the beginning of each strings would look nicer.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(132, '', u'nilearn/datasets.py')"
16,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:28:55,"Maybe this is where the create_dir argument should be used
",bcc757637643927e5afed0988a959f9b73f3a80c,"(112, '', u'nilearn/datasets.py')"
17,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:29:25,"It doesn't look like create_dir is used anymore. Maybe it should be used on l. 471.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'nilearn/datasets.py')"
18,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:34:05,"Slightly nitpicking, but why not use NILEARN_SHARED_DATA for explicitness?
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'doc/building_blocks/manipulating_mr_images.rst')"
19,pull_request_commit_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:42:45,"Just wondering, was this intentional? It seems like this colon-separated list of paths feature was slightly orthogonal to adding the NILEARN_SHARED environment variable.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(47, '', u'nilearn/datasets.py')"
8,issue_comment,224,nilearn,nilearn,lesteve,2014-09-12 12:45:20,"It'd be great if there was a way to have a test for this feature, including a few edge cases. Maybe the 'mock' argument of _fetch_files can be used in order to have quick tests that don't have to download any data.
",nan,nan
20,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:23:11,"This would be better in fact. Any thought on this naming @GaelVaroquaux ?
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'doc/building_blocks/manipulating_mr_images.rst')"
21,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:27:06,"I fixed it but in any case this page is just a draft and it's a bit outdated. We should decide if we maintain it or if we delete it.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(3, '', u'doc/developers/dataset_download.rst')"
22,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:28:34,"We never use False for this option so I just removed it.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'nilearn/datasets.py')"
23,pull_request_commit_comment,224,nilearn,nilearn,GaelVaroquaux,2014-09-12 16:37:50,"We definitely need that functionality. That question is how to solve our problem best.

@lesteve : the problem that we are trying to solve is the usecase we a sysadmin install the data, or part of the data. Therefore there needs to be several layers of directories: one for the sysadmin, which won't be writeable by the end user, and one for the end user.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(3, '', u'doc/developers/dataset_download.rst')"
24,pull_request_commit_comment,224,nilearn,nilearn,GaelVaroquaux,2014-09-12 16:38:03,"I agree with @lesteve 
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'doc/building_blocks/manipulating_mr_images.rst')"
25,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:40:08,"I was not talking about the functionality but about the documentation page ""how to write a dataset downloader"".
",bcc757637643927e5afed0988a959f9b73f3a80c,"(3, '', u'doc/developers/dataset_download.rst')"
26,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:41:56,"Fixed.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(None, '', u'doc/building_blocks/manipulating_mr_images.rst')"
27,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:46:30,"At some point we were wondering what method we should use so I implemented both. After that, I added the specific `NILEARN_SHARED_DATA` variable. In the end, we just have a list of path with decreasing priority, so I left the colon split in place. I can remove it though.
",bcc757637643927e5afed0988a959f9b73f3a80c,"(47, '', u'nilearn/datasets.py')"
28,pull_request_commit_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-12 16:46:55,"Good catch, thanks!
",bcc757637643927e5afed0988a959f9b73f3a80c,"(132, '', u'nilearn/datasets.py')"
9,issue_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-14 04:14:06,"@lesteve: it is possible to test it I think. I'll give it a shot.

@bthirion: I can be more explicit in the documentation but I think that an enumeration is better that putting that explicitly using text.
",nan,nan
10,issue_comment,224,nilearn,nilearn,bthirion,2014-09-14 10:45:34,"The documentation seems OK as is. We might update it in the future depending on the issues reported by users.
+1 for merging
",nan,nan
11,issue_comment,224,nilearn,nilearn,GaelVaroquaux,2014-09-14 12:28:25,"@AlexandreAbraham : can you please resolve the merge conflict and then merge (this counts as a :+1:).

Cheers
",nan,nan
12,issue_comment,224,nilearn,nilearn,AlexandreAbraham,2014-09-14 14:57:13,"I merge this because I need it for another PR. I'll open an issue regarding the missing tests.
",nan,nan
13,issue_comment,224,nilearn,nilearn,GaelVaroquaux,2014-09-14 14:58:07,"Thanks!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,223,nilearn,nilearn,dohmatob,2014-07-01 16:06:55,"This error was reported by travis on PR #219
",nan,nan
4,issue_comment,223,nilearn,nilearn,GaelVaroquaux,2014-07-01 16:06:55,"Yes, you need an X server. Our new pull request should solve this
problem, hopefully, via a bit of woodoo magic.

G

On Tue, Jul 01, 2014 at 09:05:48AM -0700, dohmatob elvis dopgima wrote:

> Traceback (most recent call last):
> File ""/home/travis/virtualenv/python2.7_with_system_site_packages/local/lib/
> python2.7/site-packages/nose/case.py"", line 197, in runTest
> self.test(_self.arg)
> File ""/home/travis/build/nilearn/nilearn/nilearn/plotting/test/
> test_slicers.py"", line 27, in test_demo_ortho_slicer
> pl.clf()
> File ""/usr/lib/pymodules/python2.7/matplotlib/pyplot.py"", line 443, in clf
> gcf().clf()
> File ""/usr/lib/pymodules/python2.7/matplotlib/pyplot.py"", line 369, in gcf
> return figure()
> File ""/usr/lib/pymodules/python2.7/matplotlib/pyplot.py"", line 343, in figure
> *_kwargs)
> File ""/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py"", line
> 80, in new_figure_manager
> window = Tk.Tk()
> File ""/usr/lib/python2.7/lib-tk/Tkinter.py"", line 1688, in init
> self.tk = _tkinter.create(screenName, baseName, className, interactive,
> wantobjects, useTk, sync, use)
> TclError: no display name and no $DISPLAY environment variable
> 
> —
> Reply to this email directly or view it on GitHub.*

## 

```
Gael Varoquaux
Researcher, INRIA Parietal
Laboratoire de Neuro-Imagerie Assistee par Ordinateur
NeuroSpin/CEA Saclay , Bat 145, 91191 Gif-sur-Yvette France
Phone:  ++ 33-1-69-08-79-68
http://gael-varoquaux.info            http://twitter.com/GaelVaroquaux
```
",nan,nan
5,issue_comment,223,nilearn,nilearn,GaelVaroquaux,2014-07-01 16:07:45,"> This error was reported by travis on PR #219

That means that we need to merge our PR. Do you want to have a go
reviewing it? I can work on it on the train tomorrow.
",nan,nan
6,issue_comment,223,nilearn,nilearn,dohmatob,2014-07-01 16:12:09,"Yeah I'd already seen the ""no back-end / switch backend use(""svg"") /
use('Agg') ""  fix(es). Cool. Yeah, I can review it at home. See you.

On Tue, Jul 1, 2014 at 6:07 PM, Gael Varoquaux notifications@github.com
wrote:

> > This error was reported by travis on PR #219
> 
> That means that we need to merge our PR. Do you want to have a go
> reviewing it? I can work on it on the train tomorrow.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/223#issuecomment-47675817.

## 

DED
",nan,nan
7,issue_comment,223,nilearn,nilearn,AlexandreAbraham,2014-09-15 12:54:57,"Seems to be fixed.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,220,nilearn,nilearn,agramfort,2014-06-28 12:59:02,"not sure sure what is nilearn policy on sklearn version. @GaelVaroquaux any
opinion?
",nan,nan
4,issue_comment,220,nilearn,nilearn,AlexandreAbraham,2014-06-30 12:54:53,"I think that the policy is ""this should work on Ubuntu 12.04"". As this version is shipped with sklearn 0.10, I think that it's OK to drop all version below.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
11,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-15 15:12:57,"Just wondering, is this comment about discrete values still relevant?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
12,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-15 15:16:00,"Open to better wording for the function name and the doc below.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
13,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 09:12:35,"For the function name: fast_smooth_img, and the function should be in nilearn.image.image, next to 'smooth_img'.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
14,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 09:13:11,"You probably want to say that it is less computationally expensive than smooth_img, which uses scipy.ndimage.gaussian_filter
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
15,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 09:15:03,"To be PEP8 you need two empty lines between function definitions.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
16,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 09:15:40,"I indeed think that the comment on discrete values is not relevant.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
5,issue_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 09:19:14,"You are lacking a test. No code goes in nilearn without tests. You could for instance test that an image full of ones stays full of ones. That will fail, because the normalization isn't right. So maybe we need a keyword argument 'preserve_scale', True by default, that will make sure that np.ones stays np.ones (aside from the sides).
",nan,nan
17,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-16 09:44:01,"By the way it looks like the smoothing is done only when the dtype is a signed integer. Is that on purpose?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
18,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-16 10:32:22,"No. It's wrong
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
19,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-09-25 06:31:46,"In the documentation, say explicitly what smoothing is performed: it is only spatial smoothing, the filter is [.2 1 .2] in each direction.
Bzw, using [.2 .6 .2] might preserve the value on constant images ?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
20,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-26 13:49:51,"I added some documentation for the smoothing, let me know whether the wording can be improved.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
21,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-09-26 13:51:45,"Shouldn't this be usable on 4D arrays ? if no, this should be clear in the function name.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
22,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-26 14:07:38,"As long as you want to only smooth the 3 first dimensions it should work on a ndarray. I'll tweak the doc to make it similar to _smooth_array.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
23,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-09-26 14:09:41,"OK, this is what I meant.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
24,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-26 14:38:53,"> As long as you want to only smooth the 3 first dimensions it should work on a
> ndarray. I'll tweak the doc to make it similar to _smooth_array.

We had discussed integrating this into _smooth_array, with a special
argument 'fast' to the kernel size. This would factor code out.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
25,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-09-26 14:45:25,"[.2, 1, .2]
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
26,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-26 15:57:58,"I spotted this one while tweaking the doc and fixed [it](https://github.com/lesteve/nilearn/commit/33d4615a5f9d0a318fe04c6d61baa8af8773422c)
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
27,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-26 16:05:29,"For completeness, this is what I have done, I think.

Also about the naming of the functions, I am fine adding 3d explicitely to `_smooth_array` or `_fast_smoth_array` if you think it is better. Maybe something like `_smooth_array_three_first_dims`? Better suggestions welcome! 

In this case should the 'public' function smooth_img be renamed too?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
28,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-09-27 15:50:51,"On 26/09/2014 18:05, Loïc Estève wrote:

> In nilearn/image/image.py:
> 
> > @@ -82,6 +82,50 @@ def high_variance_confounds(niimgs, n_confounds=5, percentile=2.,
> >                                             detrend=detrend)
> > 
> > +def _fast_smooth_array(arr):
> > -    """"""Simple smoothing which is less computationally expensive than
> > -    applying a gaussian filter.
> >   +
> > -    The filter is [.2, 1, 2] in each direction with a normalisation to
> > -    preserve the scale.
> >   +
> > -    Parameters
> > -    ----------
> > -    arr: 3D ndarray
> >   +
> 
> For completeness, this is what I have done, I think.
> 
> Also about the naming of the functions, I am fine adding 3d 
> explicitely to |_smooth_array| or |_fast_smoth_array| if you think it 
> is better. Maybe something like |_smooth_array_three_first_dims|? 
> Better suggestions welcome!
> 
> In this case should the 'public' function smooth_img be renamed too?
> 
> —
> Reply to this email directly or view it on GitHub 
> https://github.com/nilearn/nilearn/pull/241/files#r18097493.
> 
> The docstrings have to indicate that this acts on the first three axes 
> of the image (which is a basic convention in many NiLearn functions), 
> and does not act along potential additional axes. This means that I'm 
> fine with the current state of the code. I don't think that renaming is 
> necessary.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
6,issue_comment,241,nilearn,nilearn,lesteve,2014-09-30 06:56:12,"@GaelVaroquaux any objections to merging this?
",nan,nan
7,issue_comment,241,nilearn,nilearn,lesteve,2014-09-30 09:03:58,"Sure, no real hurry.
",nan,nan
29,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-30 13:37:25,"It would be more efficient (and less readable :) ) if you did something like

<pre>
smoothed_arr =  arr / (scale * neighbor_weight)
smoothed_arr += arr[1:]
...
smoothed_arr *= neighbor_weight
</pre>


Indeed, as each '+=' line, you are doing a costly multiplication.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/image.py')"
30,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-30 14:09:38,"We have a policy against testing with previously computed values when they are not obviously correct. I would:

Test that the center of the array is one (to check the scaling)

Test on an array that only has one non zero that the support is correct.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/tests/test_image.py')"
31,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-30 14:26:00,"I think that here I would use directly _fast_smooth_array, that operates on arrays. That was you don't need to construct a temporary NiftiImage for no good reason.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
32,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-09-30 14:41:37,"But then don't you need to test all the edge cases (pun not intended), i.e. depending on how many neighbors the 1 has (in the second test)?

What if I made the 'expected' array a bit less magical, for example by defining 

``` python
value_with_3_neighbors = (1 + 3 * neighbor_weight) / (1 + nb_neighbors * neighbor_weight)
```

and replacing 0.72727273 by value_with_3_neighbors. I would do something similar with the value for 4, 5 and 6 neighbors.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/tests/test_image.py')"
33,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-09-30 14:47:29,"> What if I made the 'expected' array a bit less magical, for example by defining
> 
> value_with_3_neighbors = (1 + 3 \* neighbor_weight) / (1 + nb_neighbors \* neighbor_weight)
> 
> and replacing 0.72727273 by value_with_3_neighbors. I would do something
> similar with the value for 4, 5 and 6 neighbors.

Than I would be happy :).

The problem with precomputed values is that when things break a few years
down the line, it's harder to diagnose the break down, because you don't
know how the reference has been generated.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/image/tests/test_image.py')"
34,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-10-01 07:14:18,"I assumed the leading underscore in the function more or less implied that it wasn't supposed to be used across modules. Also, smooth_img always removes non-finite values (via _smooth_array).

Maybe if we really don't want to create a temporary NiftiImage we can use _smooth_array with fwhm='fast'?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
35,pull_request_commit_comment,241,nilearn,nilearn,lesteve,2014-10-01 07:22:43,"BTW, would it make sense to add the neighbor weight as a parameter and possibly make it default to 0.2?
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(4, '', u'nilearn/image/image.py')"
36,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-10-01 07:34:31,"> I assumed the leading underscore in the function more or less implied that it
> wasn't supposed to be used across modules.

No, it only implies that end-users shouldn't be using it.

> Also, smooth_img always removes non-finite values (via _smooth_array).

Hum, that's a good point. Maybe we want to be using _smooth_array than.

> Maybe if we really don't want to create a temporary NiftiImage we can use
> _smooth_array with fwhm='fast'?

Agreed.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(None, '', u'nilearn/plotting/find_cuts.py')"
37,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-10-01 07:35:06,"> BTW, would it make sense to add the neighbor weight as a parameter and
> possibly make it default to 0.2?

I think that it's a case of YAGNI. If we feel the need for it at some
point, we'll add it later.
",2c2335e113af4d5fdf194f388edeaf67e9d8557f,"(4, '', u'nilearn/image/image.py')"
8,issue_comment,241,nilearn,nilearn,lesteve,2014-10-01 09:38:54,"Yep I think I answered all your comments.
",nan,nan
9,issue_comment,241,nilearn,nilearn,lesteve,2014-10-01 10:48:26,"Good catch, I have added it now.
",nan,nan
48,pull_request_commit_comment,241,nilearn,nilearn,GaelVaroquaux,2014-10-01 10:50:14,"In the type description, it should say: 'scalar, numpy.ndarray or ""fast""'.
",faf450bb3e33bec8cde1a7cdfec5f96396b92934,"(None, None, None)"
49,pull_request_commit_comment,241,nilearn,nilearn,bthirion,2014-10-01 10:50:22,"followed by a normalization to preserve the (local) average value.
",faf450bb3e33bec8cde1a7cdfec5f96396b92934,"(6, 225, u'nilearn/image/image.py')"
10,issue_comment,241,nilearn,nilearn,lesteve,2014-10-01 12:00:54,"For completeness a quick and dirty comparison of the performance gain:

``` python
import nibabel as nib
from nilearn.image import image
from nilearn import datasets

localizer = datasets.fetch_localizer_contrasts([""left vs right button press""],
                                               n_subjects=4,
                                               get_anats=True)

img = nib.load(localizer.cmaps[3])
print 'shape: ', img.get_data().shape

for fwhm in [3, 6, 9, 12, 'fast']:
    print 'fwhm: ', fwhm
    %timeit image._smooth_array(img.get_data(), img.get_affine(), fwhm=fwhm, copy=True)
```

and the result on my computer:

```
shape:  (53, 63, 46)
fwhm:  3
100 loops, best of 3: 5.59 ms per loop
fwhm:  6
100 loops, best of 3: 6.32 ms per loop
fwhm:  9
100 loops, best of 3: 7.92 ms per loop
fwhm:  12
100 loops, best of 3: 9.51 ms per loop
fwhm: fast
100 loops, best of 3: 2.78 ms per loop
```
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
