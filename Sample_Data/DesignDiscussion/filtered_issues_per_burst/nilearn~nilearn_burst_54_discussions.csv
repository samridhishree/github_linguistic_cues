Unnamed: 0,rectype,issueid,project_owner,project_name,actor,time,text,action,title
3,issue_comment,586,nilearn,nilearn,GaelVaroquaux,2015-05-13 09:24:04,"I am not sure it is worth creating a wikipedia page. I would just add a
reference on the pages on neuroimaging software.
",nan,nan
4,issue_comment,586,nilearn,nilearn,AlexandreAbraham,2015-05-13 09:37:32,"For me, it is a way to look more ""serious"" (even if the page is small) and it is the only way to get a link to the website.
",nan,nan
5,issue_comment,586,nilearn,nilearn,AlexandreAbraham,2015-05-19 07:41:29,"Page not created but nilearn referenced in the software lists.
",nan,nan
6,issue_comment,586,nilearn,nilearn,bthirion,2015-05-19 07:43:40,"Thx @AlexandreAbraham 
",nan,nan
7,issue_comment,586,nilearn,nilearn,GaelVaroquaux,2015-05-19 07:44:31,"Thank you! Closing the issue.
",nan,nan
8,issue_comment,586,nilearn,nilearn,AlexandreAbraham,2015-05-19 09:04:42,"No problem, I wanted to get rid of these annoying Wikipedia tabs in my browser ;).
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,578,nilearn,nilearn,agramfort,2015-05-09 20:03:52,"not sure how to add a test for this... just test new_img_like with an MGZ image? is it worth adding an mgz image to the repo for this?
",nan,nan
12,issue_comment,578,nilearn,nilearn,GaelVaroquaux,2015-05-09 21:29:46,"It's worth adding a small mgz to the repo to test this. Just make it small.
",nan,nan
13,issue_comment,578,nilearn,nilearn,larsoner,2015-05-09 22:43:10,"Travis complains on the `NIBABEL_VERSION=""1.1.0""` run:

```
line 83, in new_img_like
    if isinstance(ref_img, nibabel.freesurfer.mghformat.MGHImage):
AttributeError: 'module' object has no attribute 'freesurfer'
```

So I guess you'll have to also modify for old `nibabel`.
",nan,nan
6,issue_comment,578,nilearn,nilearn,agramfort,2015-05-10 08:34:16,"let's see if travis is happy...
",nan,nan
7,issue_comment,578,nilearn,nilearn,agramfort,2015-05-10 11:32:46,"travis is happy
",nan,nan
8,issue_comment,578,nilearn,nilearn,agramfort,2015-05-10 16:14:10,"ping @GaelVaroquaux 
",nan,nan
14,issue_comment,578,nilearn,nilearn,AlexandreAbraham,2015-05-11 07:50:29,"For the record, here is a small code to test accepted types in nibabel:

``` python
import nibabel
import numpy as np


def _nibabel_image_types():
    for i in nibabel.__dict__:
        if i.endswith('Image'):
            yield nibabel.__dict__[i]


types_to_test = [
        np.int8,
        np.uint8,
        np.bool,
        np.float64,
]

for image in _nibabel_image_types():
    supp = []
    unsupp = []
    for t in types_to_test:
        try:
            image(np.zeros((10, 10, 10), dtype=t), np.eye(4))
            supp.append(t)
        except:
            unsupp.append(t)
    print('Type', image)
    print('\tSupported:', supp)
    print('\tUnsupported:', unsupp)
```

And here are the results:

```
Type <class 'nibabel.nifti1.Nifti1Image'>
        Supported: [<class 'numpy.int8'>, <class 'numpy.uint8'>, <class 'numpy.float64'>]
        Unsupported: [<class 'bool'>]
Type <class 'nibabel.minc2.Minc2Image'>
        Supported: [<class 'numpy.int8'>, <class 'numpy.uint8'>, <class 'bool'>, <class 'numpy.float64'>]
        Unsupported: []
Type <class 'nibabel.spm99analyze.Spm99AnalyzeImage'>
        Supported: [<class 'numpy.uint8'>, <class 'numpy.float64'>]
        Unsupported: [<class 'numpy.int8'>, <class 'bool'>]
Type <class 'nibabel.spm2analyze.Spm2AnalyzeImage'>
        Supported: [<class 'numpy.uint8'>, <class 'numpy.float64'>]
        Unsupported: [<class 'numpy.int8'>, <class 'bool'>]
Type <class 'nibabel.freesurfer.mghformat.MGHImage'>
        Supported: [<class 'numpy.uint8'>]
        Unsupported: [<class 'numpy.int8'>, <class 'bool'>, <class 'numpy.float64'>]
Type <class 'nibabel.minc1.MincImage'>
        Supported: [<class 'numpy.int8'>, <class 'numpy.uint8'>, <class 'bool'>, <class 'numpy.float64'>]
        Unsupported: []
Type <class 'nibabel.minc1.Minc1Image'>
        Supported: [<class 'numpy.int8'>, <class 'numpy.uint8'>, <class 'bool'>, <class 'numpy.float64'>]
        Unsupported: []
Type <class 'nibabel.analyze.AnalyzeImage'>
        Supported: [<class 'numpy.uint8'>, <class 'numpy.float64'>]
        Unsupported: [<class 'numpy.int8'>, <class 'bool'>]
Type <class 'nibabel.nifti2.Nifti2Image'>
        Supported: [<class 'numpy.int8'>, <class 'numpy.uint8'>, <class 'numpy.float64'>]
        Unsupported: [<class 'bool'>]
```

So, 2 remarks:
- we should extend the condition to Spm*AnalyzeImage because they don't support int8 either
- when we use internal masks (90% of usecases if masks) we could rely on MincImage format since it supports bool. This would be easier than passing the data and affine separately in all the functions.
",nan,nan
9,issue_comment,578,nilearn,nilearn,agramfort,2015-05-11 07:52:47,"this avoids adding a file to the repo. Do you want to take over my PR?
",nan,nan
15,issue_comment,578,nilearn,nilearn,AlexandreAbraham,2015-05-11 08:00:26,"No, I think that your PR should be merged to solve your problem. Supporting all other image types is a bigger task and would take more time. I just wanted to raise this since you're talking about image types.

:+1: for merge and creating an issue about other image types.
",nan,nan
10,issue_comment,578,nilearn,nilearn,agramfort,2015-05-11 08:12:33,"fine with me

@GaelVaroquaux any objection?
",nan,nan
17,pull_request_commit_comment,578,nilearn,nilearn,GaelVaroquaux,2015-05-11 08:53:49,"Please don't rename nibabel. It's not worth saving those 4 letters.
",a64736c47b67bf97f60ce9f9b2af4be74fe69836,"(None, '', u'nilearn/tests/test_niimg.py')"
18,pull_request_commit_comment,578,nilearn,nilearn,agramfort,2015-05-11 08:57:47,"done
",a64736c47b67bf97f60ce9f9b2af4be74fe69836,"(None, '', u'nilearn/tests/test_niimg.py')"
19,pull_request_commit_comment,578,nilearn,nilearn,GaelVaroquaux,2015-05-11 08:59:08,"Please tell us (in a one-line comment) why this test is useful.
",a64736c47b67bf97f60ce9f9b2af4be74fe69836,"(20, '', u'nilearn/tests/test_niimg.py')"
16,issue_comment,578,nilearn,nilearn,GaelVaroquaux,2015-05-11 09:24:38,"Thank you. Merging
",nan,nan
11,issue_comment,578,nilearn,nilearn,agramfort,2015-05-11 09:36:28,"thanks !
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,565,nilearn,nilearn,GaelVaroquaux,2015-05-08 13:26:04,"> Closed #565.

Why did you close this? Is this not a problem?
",nan,nan
6,issue_comment,565,nilearn,nilearn,KamalakerDadi,2015-05-08 13:37:06,"There are two problems in this: vmin, vmax and threshold.
I think vmin, vmax problem is solved but threshold problem we were trying to address issue #557 .
I thought its a replication of the issues. That's the reason to close. 
",nan,nan
7,issue_comment,565,nilearn,nilearn,KamalakerDadi,2015-05-08 13:37:55,"Ok, May be I will reopen this and I will check both this issue & issue #557 together.
",nan,nan
4,issue_comment,565,nilearn,nilearn,GaelVaroquaux,2015-05-11 21:06:13,"Kamalakar: case 2 does not seem surprising to me: you are doing overlays without a threshold.

Case 3 does seem wrong. Is it still the case after the fix that we did together last week?
",nan,nan
8,issue_comment,565,nilearn,nilearn,KamalakerDadi,2015-05-11 21:08:10,"There is no problem with Case 3. Its rectified. The problem is only with threshold=None.
",nan,nan
5,issue_comment,565,nilearn,nilearn,GaelVaroquaux,2015-05-11 21:08:47,"> There is no problem with Case 3. Its rectified. The problem is only with
> threshold=None.

Then we can close it. Hurray!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,587,nilearn,nilearn,banilo,2015-05-14 17:33:20,"More generally, there appear to be some hyphenation issues in the docs. Especially, in this and similar scenarios ""machine-learning methods""
",nan,nan
12,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:46:46,"Hmm was `?:` intended, i.e. the question mark followed by a colon ? 
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
13,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:49:00,"maybe observation**s** with a final 's'?
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
14,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:49:39,"clustering repeated twice
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
15,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:50:49,"arguable. I don't know exactly why but I preferred it as it was.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(128, '', u'doc/introduction.rst')"
16,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:54:21,"missing 'o' in foll**o**wing

maybe 'type in' is simpler to understand than 'punch in'
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
17,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:55:32,"google seems to prefer ""no error occur**s**""
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
18,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:57:16,"I would stick with development rather than developmental.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
19,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 18:59:40,"I would keep ""For simple ..."" rather than ""To simple ...""
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
20,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 19:00:11,"brain volume**s**
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
21,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 19:00:41,"I am not sure what the ""and every"" brings
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
22,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 19:01:36,"with -> by replacement arguable
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
23,pull_request_commit_comment,587,nilearn,nilearn,lesteve,2015-05-14 19:02:12,"typo in nilearn
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
24,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:36:28,":+1: 
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
25,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:38:31,"Anaconda describes itself as ""Anaconda Scientific Python Distribution"".
",c9b7963a5df9f07d281b530503860f820c518fcb,"(128, '', u'doc/introduction.rst')"
26,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:43:39,"Not sure that I prefer your formulation on this one. But can't tell why, that's totally subjective.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
27,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:45:50,"What about linux users?
",c9b7963a5df9f07d281b530503860f820c518fcb,"(169, '', u'doc/introduction.rst')"
28,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:47:42,"`cmd.exe` send me back 6 or 7 years ago. We can cite it but I think that powershell should be evoked first.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(170, '', u'doc/introduction.rst')"
29,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:48:39,":+1: for ""type in"".

I would use ""check"" rather than ""verify"".
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
30,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:51:03,"""as an alternative to using pip"" -> Should we put the line stating how to install the dev version with pip too?
",c9b7963a5df9f07d281b530503860f820c518fcb,"(195, '', u'doc/introduction.rst')"
31,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:51:38,"I would remove the ""yes, ""
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
32,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:53:40,"I don't think that measuring the execution time of a command is a useful feature for our users. I think that interactive debugging is more useful.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
33,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:55:16,"What about ""First things first, nilearn does not have a graphical user interface. But you will soon realize that you don't really need one.""?
",c9b7963a5df9f07d281b530503860f820c518fcb,"(285, '', u'doc/introduction.rst')"
34,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:59:01,"Yes, I would stick to ""with"".
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
35,pull_request_commit_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 22:59:38,"""found at here"" does not seem correct to my ear.
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
6,issue_comment,587,nilearn,nilearn,AlexandreAbraham,2015-05-14 23:00:55,"Great stuff. I just put in some subjective remarks but that may not be relevant since your english is better than mine.
",nan,nan
7,issue_comment,587,nilearn,nilearn,AlexandreAbraham,2015-06-03 11:22:01,"@banilo do you plan to address the comments or should we close / take over this PR?
",nan,nan
36,pull_request_commit_comment,587,nilearn,nilearn,banilo,2015-06-11 13:23:11,"year...I also prefer the new version
",c9b7963a5df9f07d281b530503860f820c518fcb,"(128, '', u'doc/introduction.rst')"
37,pull_request_commit_comment,587,nilearn,nilearn,banilo,2015-06-11 13:27:25,"i think, they just know
",c9b7963a5df9f07d281b530503860f820c518fcb,"(169, '', u'doc/introduction.rst')"
38,pull_request_commit_comment,587,nilearn,nilearn,banilo,2015-06-11 13:28:07,"that was for fun
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
39,pull_request_commit_comment,587,nilearn,nilearn,banilo,2015-06-11 13:34:32,"addressed all of these 3 but does not show here
",c9b7963a5df9f07d281b530503860f820c518fcb,"(None, '', u'doc/introduction.rst')"
8,issue_comment,587,nilearn,nilearn,banilo,2015-06-11 13:35:19,"> @banilo do you plan to address the comments or should we close / take over this PR?

sorry for the delay. I got sucked into something.

I should have addressed all immediately addressable suggestions now.
",nan,nan
9,issue_comment,587,nilearn,nilearn,lesteve,2015-06-12 08:52:42,"Looks like a definitive improvement, thanks a lot for this.
",nan,nan
10,issue_comment,587,nilearn,nilearn,banilo,2015-06-12 09:12:10,"Thanks for merging... I will look at the rest of the docs over the next days.
",nan,nan
11,issue_comment,587,nilearn,nilearn,lesteve,2015-06-12 09:35:00,"Rather than improving the wording, I feel it is slightly higher priority to go over the documentation code snippets and make sure: 
- they make sense: the way we include part of the examples in the doc via litteralinclude is notoriously fragile
- they work. I am pretty sure some are broken for example https://github.com/nilearn/nilearn/issues/424 list a few of them
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
46,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-05 07:27:27,"I'd rather have the heuristic that I proposed, using the max, rather that the heuristic using the sum. Indeed, the max is really what people look at in neuroimaging, it's the ""blob"" sticking out.
",5d68e77b21d77d812fe34cad99f32b2547d295d1,"(None, None, None)"
47,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-05 07:29:37,"I don't understand the goal of these lines: I don't see what they test at the level of CanICA
",5d68e77b21d77d812fe34cad99f32b2547d295d1,"(63, 92, u'nilearn/decomposition/tests/test_canica.py')"
48,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-05 07:30:47,"Good thinking with regards to decreasing the number of subjects to speed up tests. How about having only 2 subjects?
",5d68e77b21d77d812fe34cad99f32b2547d295d1,"(53, 82, u'nilearn/decomposition/tests/test_canica.py')"
49,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-05 08:23:44,"Those lines are not meant to test CanICA. They're simply making sure the test data are what they should be (more blue than red). They're testing the test data for sanity. They're meta-tests if you like. At worst, those lines don't do any harm.
",5d68e77b21d77d812fe34cad99f32b2547d295d1,"(63, 92, u'nilearn/decomposition/tests/test_canica.py')"
8,issue_comment,571,nilearn,nilearn,dohmatob,2015-05-05 08:49:10,"3 ==> 2 subjects in test.
",nan,nan
9,issue_comment,571,nilearn,nilearn,dohmatob,2015-05-05 08:49:56,"sum ==> max heuristic
",nan,nan
12,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-07 14:01:00,"I don't understand the few lines above: what are they there for? It seems that they are not used.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
13,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-08 14:07:47,"Yes the code snippet is useless as it stands. Thanks for spotting. I'm pushing the full test-case (where the above snippet is used).
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
14,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 21:55:43,"Just use assert_true I would say. If we care about providing an assert_less, it should be done somewhere in _utils rather than in one test file.

Two comments:
- assert_less_than does not exist it seems (it is called assert_less AFAICT)
- what you implemented is actually assert_less_equal
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
15,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 21:59:26,"I don't think this comment is accurate anymore now that we use the max heuristics.

Also I'd rather have a comment that explain that it is a heuristics for reproducible maps rather than mentioning the GH issue.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/canica.py')"
16,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 23:00:03,"Is that not the exact same thing as l. 107-108?
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
17,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 23:01:04,"This comment is not accurate anymore since we are using a max heuristic.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
18,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 23:26:19,"In your example you have actually mp.max() == 1 == -mp.min() so the maps don't get the sign flip. If you are wondering, the reason your test pass is that your test is less or equal and it hits the  equal case in both directions.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
19,pull_request_commit_comment,571,nilearn,nilearn,lesteve,2015-05-08 23:28:50,"This comment is not far from useless. Even if I knew what you were trying to test it took me a while to make sense of it.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
20,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-09 07:59:53,"yep, there was typo in the function name/
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
21,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 08:33:49,"Could you please move this to a new file in nilearn/_utils/fixes/testings and mention in a comment that when we support scikit-learn 0.14 we can remove it.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
22,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:21:05,"For PEP8 there should be 2 empty lines between first-level entries, thus 2 empty lines here.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
23,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:30:06,"It would be cooler / more readable if you used iter_img on the img rather than rollaxis on the data.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
5,issue_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:30:35,"No further comments from me: should be mergeable once the above comments are addressed.
",nan,nan
24,pull_request_commit_comment,571,nilearn,nilearn,banilo,2015-05-09 10:34:01,"cf. `assert_raises_regex` appears to be similar case and is located in nilearn/_utils/testing.py
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
25,pull_request_commit_comment,571,nilearn,nilearn,banilo,2015-05-09 10:35:50,"Function name, even if private, could be more explicit, particularly with respect to the format of the output.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
26,pull_request_commit_comment,571,nilearn,nilearn,banilo,2015-05-09 10:46:39,"Mention ""regression test"" at this point? ...perhaps instead of ""BF"".
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
27,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 10:50:00,"> > +def test_component_sign():
> > -    # BF for issue #570
> 
> Mention ""regression test"" at this point? ...perhaps instead of ""BF"".

Good point. And don't put a number, which doesn't mean much to the
reader, but a short description of the issue.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
30,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-09 11:00:53,"Please could you create a separate issue ? This is not related to / was not introduced by, the PR.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
28,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-09 11:09:51,"This recommendation is strange. My PEP8 checker dislikes it. Also, does it really matter here ? :)
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
10,issue_comment,571,nilearn,nilearn,dohmatob,2015-05-09 11:14:59,"OK, I've completed my end of the deal.
",nan,nan
11,issue_comment,571,nilearn,nilearn,dohmatob,2015-05-09 11:35:32,"OK, the coveralls threshold (for acceptable % coverage decrease) seems crazy :)  Is 0.01 not simply too tiny ?

Also it seems to me about have of the open / half-closed PRs are affected same way. Any thoughts ?
",nan,nan
6,issue_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 12:46:31,"Don't worry about the coverage report. 
",nan,nan
29,pull_request_commit_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 12:47:56,"Please move the above to nilearn._utils.testing
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
31,pull_request_commit_comment,571,nilearn,nilearn,dohmatob,2015-05-09 13:01:47,"Done.
",56b4ca29e1d4815064dff2e1b1cb4bdff8deab00,"(None, '', u'nilearn/decomposition/tests/test_canica.py')"
7,issue_comment,571,nilearn,nilearn,GaelVaroquaux,2015-05-09 13:55:06,":+1: for merge.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
11,issue_comment,556,nilearn,nilearn,lesteve,2015-04-22 14:37:45,"Just curious, what's your use case, making it easier to visually compare different connectome plots by using the same norm for all these plots?

Maybe having `edge_vmin` and `edge_vmax` arguments in plot_connectome would be easier to understand for the user.
",nan,nan
5,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-22 15:03:34,"I am not very excited about exposing this super technical option to the
user while we are really striving to target simpler, less technical
users.

Is there a reason why you cannot process your data, for instance applying a
log, and then use a standard normalization?
",nan,nan
6,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-22 15:34:49,"OK, but trying to solve every corner case is going to blow up the
cyclomatic complexity of nilearn and make the API really hard to
understand (matplotlib is a good example of this). So we are taking the
""Steve Jobs"" position on this and only catering to the 99% usecase.

Just to stress that this is not a theoretical argument but a practical
one, the recent few additions to the colorbar have made our codebase much
more complex and lead to a buggy release. We don't have the resources to
address these issues.
",nan,nan
7,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-22 15:43:29,"> Sounds like an absolutely reasonable criteria. Would you rather I change it for
> the simpler vmin, vmax?

Yes, such an API is easily understandable by non technical users.

> Nowadays the vmin-vmax behaviour is internally hardcoded and not documented.
> It's in lines 266-270 of nilearn/plotting/displays.py

I agree that from a design perspective this is not ideal. I think that
exposing it and documentating it is a clear cut improvement.

Thanks
",nan,nan
12,issue_comment,556,nilearn,nilearn,lesteve,2015-04-28 06:24:54,"Sorry I completely missed the fact that you implemented the proposed changes. I'll take a closer look today.
",nan,nan
14,pull_request_commit_comment,556,nilearn,nilearn,banilo,2015-04-28 13:45:51,"Just wondering, does it work if `vmin==vmax`, that is, all all connectivity strengths have the same value?
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
15,pull_request_commit_comment,556,nilearn,nilearn,banilo,2015-04-28 13:47:44,"might not be explicit enough to convey the effect of `edge_vmin/max`on the plot...
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(72, '', u'nilearn/plotting/displays.py')"
16,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-28 14:02:21,"This is replicates the previous implicit behaviour of the function where vmin and vmax where set. So the functional description still works. If vmin == vmax then all will be the same color which is the current matplotlib behaviour too
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
17,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-28 14:03:46,"I copied the current descritpion style in matplotlib. Do you have concrete suggestions?
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(72, '', u'nilearn/plotting/displays.py')"
18,pull_request_commit_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-28 17:53:33,"I think that the logic of this code will be surprising when vmin is none but not vmax.

I think that vmax should be set first,  and then vmin set to -vmax if none. 
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
19,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-28 17:56:47,"I agree. This type of clamping is very much an fMRI or co-variance matrix use-case so I rely on your expertise.
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
20,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-28 18:03:56,"However, @GaelVaroquaux , what happens in your case if vmin is positive and vmax is None?
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
21,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-28 18:05:34,"also the case where vmin is None and vmax is None will be quirky.
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
22,pull_request_commit_comment,556,nilearn,nilearn,lesteve,2015-04-29 09:34:55,"> I think that vmax should be set first, and then vmin set to -vmax if none.

Agreed. That means:
- vmin and vmax are None: current behaviour, `vmax = np.max(np.abs(edge_data))`, `vmin = -vmax`
- vmin is None, vmax set: `vmin = -vmax`
- vmin set, vmax is None: `vmax = np.max(np.abs(edge_data))`, leave vmin as provided
- vmin and vmax set: leave vmax and vmin as provided

> However, @GaelVaroquaux , what happens in your case if vmin is positive and vmax is None?

See above. About these weird edge cases, I would be in favor of not trying to catch them all and just letting the matplotlib code do whatever it does in these cases.
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
23,pull_request_commit_comment,556,nilearn,nilearn,demianw,2015-04-29 09:41:15,"I can do whatever you think is the best case however the lack of symmetry between cases 2 and 3 that you, @lesteve . I would either go with 
- vmin is None, vmax set: vmin = -vmax (throwing a ValueError if vmin is positive) 
- vmax is None, vmin set: vmax = -vmin (throwing a ValueError if vmax is negative)

or 
- vmin set, vmax is None: vmax = np.max(np.abs(edge_data))
- vmax set, vmin is None: vmin = -np.max(np.abs(edge_data))

But you guys have the last word
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
24,pull_request_commit_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-29 10:37:12,">   • vmin is None, vmax set: vmin = -vmax (throwing a ValueError if vmin is
>     positive)
>   • vmax is None, vmin set: vmax = -vmin (throwing a ValueError if vmax is
>     negative)
> 
> or
> 
>   • vmin set, vmax is None: vmax = np.max(np.abs(edge_data))
>   • vmax set, vmin is None: vmin = -np.max(np.abs(edge_data))

First option is what I would expect.
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
25,pull_request_commit_comment,556,nilearn,nilearn,lesteve,2015-04-29 10:51:14,"> First option is what I would expect.

Makes more sense than what I said indeed.
",d0aa6205af63171f4fadbe49803fee8331306fe3,"(None, '', u'nilearn/plotting/displays.py')"
8,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-30 11:24:32,"IMHO, the only remaining item to be done on this PR is the vmin / vmax behavior when the other is none (as discussed in inline comments). The rest is :+1: from me.

I'd love to get this in the 0.1.3 release.
",nan,nan
9,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-30 11:35:58,"LGTM, :+1: for merge.

Thanks @demianw !
",nan,nan
13,issue_comment,556,nilearn,nilearn,lesteve,2015-04-30 11:51:15,"Merging, thanks a lot!
",nan,nan
10,issue_comment,556,nilearn,nilearn,GaelVaroquaux,2015-04-30 11:52:22,"> Merged #556.

Hurry. Thanks again Demian
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,577,nilearn,nilearn,agramfort,2015-05-08 20:43:31,"if I convert the mgz to nii it works...
",nan,nan
5,issue_comment,577,nilearn,nilearn,eickenberg,2015-05-08 20:57:20,"I cannot right now run the full mne example, but is this a nilearn or a nibabel thing in your opinion?

Loading the T1.mgz worked transparently with `nibabel.load`, which I assume it is expected to do. It gives me dtype `uint8` though, instead of `int8`, which is weird.
",nan,nan
4,issue_comment,577,nilearn,nilearn,GaelVaroquaux,2015-05-08 21:17:19,"Fucked up format. Stop promoting / using it and help us push for pen standards rather than lone labs feeling powerful enough to invent new file formats. 

Sent from my phone. Please forgive brevity and mis spelling

On May 8, 2015, 22:40, at 22:40, Alexandre Gramfort notifications@github.com wrote:

> we use a plot_stat_map in MNE:
> 
> http://martinos.org/mne/dev/auto_examples/inverse/plot_lcmv_beamformer_volume.html#example-inverse-plot-lcmv-beamformer-volume-py
> 
> with the current master of nilearn it fails due to the dtype (int8) of
> the anat I make available at:
> 
> https://dl.dropboxusercontent.com/u/2140486/T1.mgz
> 
> error is:
> 
> ```
> /Users/alex/work/src/nibabel/nibabel/freesurfer/mghformat.pyc in
> set_data_dtype(self, datatype)
>    284             code = self._data_type_codes[datatype]
>    285         except KeyError:
> --> 286             raise MGHError('datatype dtype ""%s"" not recognized'
> % datatype)
>    287         self._header_data['type'] = code
>    288
> 
> MGHError: datatype dtype ""int8"" not recognized
> ```
> 
> any help?
> 
> ---
> 
> Reply to this email directly or view it on GitHub:
> https://github.com/nilearn/nilearn/issues/577
",nan,nan
6,issue_comment,577,nilearn,nilearn,dengemann,2015-05-08 21:29:55,"... https://xkcd.com/927/

2015-05-08 23:17 GMT+02:00 Gael Varoquaux notifications@github.com:

> Fucked up format. Stop promoting / using it and help us push for pen
> standards rather than lone labs feeling powerful enough to invent new file
> formats.
> 
> Sent from my phone. Please forgive brevity and mis spelling
> 
> On May 8, 2015, 22:40, at 22:40, Alexandre Gramfort <
> notifications@github.com> wrote:
> 
> > we use a plot_stat_map in MNE:
> > 
> > http://martinos.org/mne/dev/auto_examples/inverse/plot_lcmv_beamformer_volume.html#example-inverse-plot-lcmv-beamformer-volume-py
> > 
> > with the current master of nilearn it fails due to the dtype (int8) of
> > the anat I make available at:
> > 
> > https://dl.dropboxusercontent.com/u/2140486/T1.mgz
> > 
> > error is:
> > 
> > ```
> > /Users/alex/work/src/nibabel/nibabel/freesurfer/mghformat.pyc in
> > set_data_dtype(self, datatype)
> > 284 code = self._data_type_codes[datatype]
> > 285 except KeyError:
> > --> 286 raise MGHError('datatype dtype ""%s"" not recognized'
> > % datatype)
> > 287 self._header_data['type'] = code
> > 288
> > 
> > MGHError: datatype dtype ""int8"" not recognized
> > ```
> > 
> > any help?
> > 
> > ---
> > 
> > Reply to this email directly or view it on GitHub:
> > https://github.com/nilearn/nilearn/issues/577
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/577#issuecomment-100371538.
",nan,nan
7,issue_comment,577,nilearn,nilearn,eickenberg,2015-05-08 21:31:48,"(With the difference that the proposed standards already exist)

On Fri, May 8, 2015 at 11:29 PM, Denis A. Engemann <notifications@github.com

> wrote:
> 
> ... https://xkcd.com/927/
> 
> 2015-05-08 23:17 GMT+02:00 Gael Varoquaux notifications@github.com:
> 
> > Fucked up format. Stop promoting / using it and help us push for pen
> > standards rather than lone labs feeling powerful enough to invent new
> > file
> > formats.
> > 
> > Sent from my phone. Please forgive brevity and mis spelling
> > 
> > On May 8, 2015, 22:40, at 22:40, Alexandre Gramfort <
> > notifications@github.com> wrote:
> > 
> > > we use a plot_stat_map in MNE:
> > 
> > http://martinos.org/mne/dev/auto_examples/inverse/plot_lcmv_beamformer_volume.html#example-inverse-plot-lcmv-beamformer-volume-py
> > 
> > > with the current master of nilearn it fails due to the dtype (int8) of
> > > the anat I make available at:
> > > 
> > > https://dl.dropboxusercontent.com/u/2140486/T1.mgz
> > > 
> > > error is:
> > > 
> > > ```
> > > /Users/alex/work/src/nibabel/nibabel/freesurfer/mghformat.pyc in
> > > set_data_dtype(self, datatype)
> > > 284 code = self._data_type_codes[datatype]
> > > 285 except KeyError:
> > > --> 286 raise MGHError('datatype dtype ""%s"" not recognized'
> > > % datatype)
> > > 287 self._header_data['type'] = code
> > > 288
> > > 
> > > MGHError: datatype dtype ""int8"" not recognized
> > > ```
> > > 
> > > any help?
> > > 
> > > ---
> > > 
> > > Reply to this email directly or view it on GitHub:
> > > https://github.com/nilearn/nilearn/issues/577
> > 
> > —
> > Reply to this email directly or view it on GitHub
> > https://github.com/nilearn/nilearn/issues/577#issuecomment-100371538.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/577#issuecomment-100373622.
",nan,nan
8,issue_comment,577,nilearn,nilearn,AlexandreAbraham,2015-05-08 21:41:41,"> I cannot right now run the full mne example, but is this a nilearn or a nibabel thing in your opinion?

A bit of both, mainly nilearn's fault.

What happens is that data is loaded in `uint8` type and then some magic happens in the code and the data is converted to `int8` that is not supported by the data format.

IMHO, converting data implictly is utterly wrong.
",nan,nan
9,issue_comment,577,nilearn,nilearn,AlexandreAbraham,2015-05-08 21:51:22,"OK. If the data is boolean, we convert it to int8. We do that because Nifti1Image does not handle bool. The problem is that MGH format does not handle int8, only uint8. I can't find an easy way to get accepted types for each format.
",nan,nan
10,issue_comment,577,nilearn,nilearn,eickenberg,2015-05-08 21:54:29,"But Nifti1Image can also do uint8. What is the rationale behind using int8
and not uint8 for the bool conversion?

On Fri, May 8, 2015 at 11:51 PM, Alexandre Abraham <notifications@github.com

> wrote:
> 
> OK. If the data is boolean, we convert it to int8. We do that because
> Nifti1Image does not handle bool. The problem is that MGH format does not
> handle int8, only uint8. I can't find an easy way to get accepted types for
> each format.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/577#issuecomment-100377390.
",nan,nan
11,issue_comment,577,nilearn,nilearn,AlexandreAbraham,2015-05-08 21:56:28,"One additional character!

We have to check if uint8 is accepted by all other formats.
",nan,nan
12,issue_comment,577,nilearn,nilearn,GaelVaroquaux,2015-05-08 22:38:57,"No converting the data is not wrong : I've seen many bugs due to over and under flows when using the wrong type. 

Sent from my phone. Please forgive brevity and mis spelling

On May 8, 2015, 23:41, at 23:41, Alexandre Abraham notifications@github.com wrote:

> > I cannot right now run the full mne example, but is this a nilearn or
> > a nibabel thing in your opinion?
> 
> A bit of both, mainly nilearn's fault.
> 
> What happens is that data is loaded in `uint8` type and then some magic
> happens in the code and the data is converted to `int8` that is not
> supported by the data format.
> 
> In my mind, converting data implictly is utterly wrong.
> 
> ---
> 
> Reply to this email directly or view it on GitHub:
> https://github.com/nilearn/nilearn/issues/577#issuecomment-100375915
",nan,nan
13,issue_comment,577,nilearn,nilearn,GaelVaroquaux,2015-05-08 22:40:05,"And readers: mricron, fslview and papaya souks be able to read uint8

Sent from my phone. Please forgive brevity and mis spelling

On May 8, 2015, 23:56, at 23:56, Alexandre Abraham notifications@github.com wrote:

> One additional character!
> 
> We have to check if uint8 is accepted by all other formats.
> 
> ---
> 
> Reply to this email directly or view it on GitHub:
> https://github.com/nilearn/nilearn/issues/577#issuecomment-100378384
",nan,nan
14,issue_comment,577,nilearn,nilearn,AlexandreAbraham,2015-05-08 23:13:11,"So should we just convert to uint8 instead of int8?
",nan,nan
15,issue_comment,577,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:08:22,"First: I don't understand the problem: I cannot reproduce, calling plot_anat on the corresponding file.

Second, I am very worried about supporting mgz. I think that this is feature creep. Very few people use it, and if we try supporting it, I am afraid that it will be broken most often. Our docs clearly talk about 'niimg like', ie NiftiImage like, which mgz is.

I guess that my point of view on this problem is that we will accept a PR fixing it in a clean way, and if people join the dev team to support mgz files, its fine. But I don't feel like allocating our already sparse resources to it.
",nan,nan
16,issue_comment,577,nilearn,nilearn,eickenberg,2015-05-09 21:36:43,"> So should we just convert to uint8 instead of int8?

What could potentially speak against this? (It makes sense from the point of view that `uint8` is in a certain sense a smallest increment in complexity wrt `bool`, but I don't know if there are practical implications that would be counterindications to this choice)
",nan,nan
17,issue_comment,577,nilearn,nilearn,GaelVaroquaux,2015-05-09 21:38:23,"> ```
> So should we just convert to uint8 instead of int8?
> ```
> 
> What could potentially speak against this?

It's less often used (at least in the analyze / nifti world), thus we run
into more chances that a software does not recognize it.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
7,pull_request_commit_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:51:58,"Could you move this as a top-level function, rather than an embedded function. It makes it easier for reuse and testing.
",3686a8da936884fea429d5c16ceb05b031009072,"(None, '', u'nilearn/plotting/find_cuts.py')"
8,pull_request_commit_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:56:31,"How much time is this adding to the tests?

Unfortunately our plotting tests are a bit long, given that they involve a lot of matplotlib machinery. Thus we need to be careful here, and sometimes we will not test the full plotting function, but only the internal cutting one, if the cost in time is too much. Indeed, if the tests start taking too long to run, people won't run them anymore.
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
5,issue_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:57:03,"Aside from the two minor comments, this seems good to go to me. Thanks heaps.
",nan,nan
9,pull_request_commit_comment,576,nilearn,nilearn,dohmatob,2015-05-09 10:48:09,"OK, i did include a test for the cutting function. So i guess i can just remove this one, since it's not very DRY.
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
10,pull_request_commit_comment,576,nilearn,nilearn,dohmatob,2015-05-09 10:48:18,"sure
",3686a8da936884fea429d5c16ceb05b031009072,"(None, '', u'nilearn/plotting/find_cuts.py')"
11,pull_request_commit_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 10:50:36,"> OK, i did include a test for the cutting function. So i guess i can
> just remove this one, since it's not very DRY.

I am just asking an estimation of time, to know whether or not to include
it.
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
12,pull_request_commit_comment,576,nilearn,nilearn,dohmatob,2015-05-09 10:54:43,"10 loops, best of 3: 234 ms per loop

On Sat, May 9, 2015 at 12:50 PM, Gael Varoquaux notifications@github.com
wrote:

> In nilearn/plotting/tests/test_img_plotting.py
> https://github.com/nilearn/nilearn/pull/576#discussion_r29991782:
> 
> > @@ -379,3 +379,11 @@ def test_plot_connectome_exceptions():
> >                          adjacency_matrix, node_coords,
> >                          node_kwargs={'c': 'blue'},
> >                          **kwargs)
> > +
> > +
> > +def test_singleton_ax_dim():
> > -    for axis, direction in enumerate(""xyz""):
> > -        shape = [5, 6, 7]
> > -        shape[axis] = 1
> > -        img = nibabel.Nifti1Image(np.ones(shape), np.eye(4))
> > -        plot_stat_map(img, None, display_mode=direction)
> 
>  OK, i did include a test for the cutting function. So i guess i can just
> remove this one, since it's not very DRY.
> I am just asking an estimation of time, to know whether or not to include
> it.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/pull/576/files#r29991782.

## 

DED
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
13,pull_request_commit_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 12:44:03,"> 10 loops, best of 3: 234 ms per loop

Let's keep it then!

Thanks
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
14,pull_request_commit_comment,576,nilearn,nilearn,dohmatob,2015-05-09 13:00:02,"Done.
",3686a8da936884fea429d5c16ceb05b031009072,"(11, '', u'nilearn/plotting/tests/test_img_plotting.py')"
6,issue_comment,576,nilearn,nilearn,GaelVaroquaux,2015-05-09 14:04:00,":+1: for merge!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
10,pull_request_commit_comment,553,nilearn,nilearn,AlexandreAbraham,2015-04-20 20:34:22,"Do we have to put space before colons now?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
11,pull_request_commit_comment,553,nilearn,nilearn,GaelVaroquaux,2015-04-20 20:35:53,"> Do we have to put space before colons now?

Yes. It's always been like this in the numpy doc standard. But we keep
forgetting.
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
12,pull_request_commit_comment,553,nilearn,nilearn,AlexandreAbraham,2015-04-20 20:52:58,"Well, I don't keep forgetting, I've been corrected several times when I add them...
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
13,pull_request_commit_comment,553,nilearn,nilearn,GaelVaroquaux,2015-04-20 20:54:24,"> Well, I don't keep forgetting, I've been corrected several times when I add
> them...

:$
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
14,pull_request_commit_comment,553,nilearn,nilearn,AlexandreAbraham,2015-04-21 08:54:50,"Here is an image of generated doc. For the first parameter, there is no space. For the second one, I put a space. You can see that the extra space shows in the doc. This is, AFAIK, why we decided not to put them (this is the same in scikit-learn). I am not against adding them but we should be consistent and do that in a dedicated PR.

![space](https://cloud.githubusercontent.com/assets/1647301/7248651/a5291bba-e814-11e4-8c76-9ae3ecb2d685.png)
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
15,pull_request_commit_comment,553,nilearn,nilearn,AlexandreAbraham,2015-04-21 08:56:29,"There is no change in the code for that output.
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
16,pull_request_commit_comment,553,nilearn,nilearn,salma1601,2015-04-24 14:02:05,"hi @GaelVaroquaux 
What's the need for this additionnal output std ? Can't we just not standardize the input signal in the confounds removal if standardize is set to False?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
17,pull_request_commit_comment,553,nilearn,nilearn,GaelVaroquaux,2015-04-24 15:37:31,"Indeed, thanks for the comment, Alex and Salma. This is a mistake and I
am correcting it.
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(None, '', u'nilearn/signal.py')"
5,issue_comment,553,nilearn,nilearn,GaelVaroquaux,2015-04-24 15:40:18,"Comments addressed. Thanks for the review.
",nan,nan
18,pull_request_commit_comment,553,nilearn,nilearn,salma1601,2015-04-24 15:55:28,"if detrend is False here, the _standardize will just return a copy of the signals without centering them. May be the function _standardize also has to be changed so that the signal is centered even if both standardize and detrend are False ?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(13, '', u'nilearn/signal.py')"
19,pull_request_commit_comment,553,nilearn,nilearn,AlexandreAbraham,2015-04-25 14:30:26,"You mean that you want a constant trend to be removed even if detrend is False?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(13, '', u'nilearn/signal.py')"
20,pull_request_commit_comment,553,nilearn,nilearn,salma1601,2015-04-25 17:25:51,"yes that's what I meant but thinking again it is not necessary. In fact I was testing the new code on ADHD removing one unique constant confound and I had a weired result.
![demo_constant_removal](https://cloud.githubusercontent.com/assets/7080143/7333892/8c628cba-eb7f-11e4-84ad-e151f34f175d.png)

Investigating what is wrong it turns out it is the way the regression of confounds is done. In fact, it relies on a QR decomposition and in case of a unique null confound, the Q matrix is the vector np.array([1, 0, ..., 0]). So the output signal is np.array([0, input[1], ..., input[n]]). 

https://github.com/nilearn/nilearn/blob/master/nilearn/signal.py#L460

I think that the case of a constant confound must be handled precisely. Shall I open another issue for that?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(13, '', u'nilearn/signal.py')"
21,pull_request_commit_comment,553,nilearn,nilearn,salma1601,2015-04-26 08:14:57,"I added a new issue for the confounds removal, because I think it is unrelated to standardization.
https://github.com/nilearn/nilearn/issues/561
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(13, '', u'nilearn/signal.py')"
6,issue_comment,553,nilearn,nilearn,GaelVaroquaux,2015-05-07 14:07:35,"By looking at the discussion, I think that they is nothing to do on this PR, and that it is mergeable.

Can I haz reviews? To haz merge?
",nan,nan
22,pull_request_commit_comment,553,nilearn,nilearn,lesteve,2015-05-09 00:26:02,"I feel this has been discussed but I couldn't find it anywhere. How come we need to relax this condition, i.e. somehow that the cleaned_signals and confounds are less orthogonal ?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(5, '', u'nilearn/tests/test_signal.py')"
23,pull_request_commit_comment,553,nilearn,nilearn,lesteve,2015-05-09 00:26:48,"Same question as above, do we understand why we need to relax this condition?
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(14, '', u'nilearn/tests/test_signal.py')"
24,pull_request_commit_comment,553,nilearn,nilearn,GaelVaroquaux,2015-05-09 08:54:41,"I am not sure. I couldn't get this to work.

There are two possible explanations: either the normalizing does indeed improve the numerics, and the results are less orthogonal. I think that it would not be the end of the world given that the precision is still very good.

Or options: the norm of residuals is really related to the norm of what goes in. Relative errors are what it meaningful, not absolute. Thus, it is normal that it goes up.

Anyhow, I couldn't decide which one was true, and chose to move forward: I don't think that this is too bad.
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(5, '', u'nilearn/tests/test_signal.py')"
25,pull_request_commit_comment,553,nilearn,nilearn,salma1601,2015-05-09 22:41:23,"> Or options: the norm of residuals is really related to the norm of what goes in. Relative errors are what it meaningful, not absolute. Thus, it is normal that it goes up.

for me this is the reason we need to relax both tests. To be convinced, rerun the same tests on the master with standardize=True (which results in a multiplication of the output signal by some factor) and the tests will not work.
",7dc04275022925c2f8a16e9c5f215890b43c0fa8,"(14, '', u'nilearn/tests/test_signal.py')"
8,issue_comment,553,nilearn,nilearn,AlexandreAbraham,2015-05-11 09:23:58,"Pouce vers le haut !
",nan,nan
7,issue_comment,553,nilearn,nilearn,GaelVaroquaux,2015-05-11 09:25:48,"Okay! Alors je merge ce tantôt. 
",nan,nan
9,issue_comment,553,nilearn,nilearn,eickenberg,2015-05-11 09:25:50,"> Pouce vers le haut !

Bon pour fusion?

http://www.wordreference.com/enfr/merge
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,574,nilearn,nilearn,GaelVaroquaux,2015-05-07 09:48:01,"Hey Kamalakar,

Thanks! Could you include a screen shot of the example with the changes.

Cheers
",nan,nan
7,issue_comment,574,nilearn,nilearn,KamalakerDadi,2015-05-07 10:44:07,"Example changes:

``` python
# Now add as an overlay the maps for the ACC and the left and right
# parietal nodes
display.add_overlay(image.index_img(atlas_filename, 5),
                    cmap=plotting.cm.black_blue)
display.add_overlay(image.index_img(atlas_filename, 6),
                    cmap=plotting.cm.black_green)
display.add_overlay(image.index_img(atlas_filename, 3),
                    cmap=plotting.cm.black_pink)

plt.show()
```

Basically removed vmin and vmax arguments.

For this, changed add_overlay codebase in displays.py

``` python
if 'vmin' not in kwargs:
            kwargs['vmin'] = np.ma.min([d.min() for d in data_2d_list
                                                         if d is not None])
        if 'vmax' not in kwargs:
            kwargs['vmax'] = np.ma.max([d.max() for d in data_2d_list
                                                          if d is not None])
```

![figure_1](https://cloud.githubusercontent.com/assets/11410385/7513737/b026d896-f4b6-11e4-8cf8-6f0b1eed1a21.png)
",nan,nan
8,issue_comment,574,nilearn,nilearn,KamalakerDadi,2015-05-07 10:47:06,"@GaelVaroquaux Is that what you mean ?
",nan,nan
6,issue_comment,574,nilearn,nilearn,GaelVaroquaux,2015-05-07 11:00:42,"Yes, this is what I meant.

This works well. :+1: for merge. Thanks!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
4,issue_comment,575,nilearn,nilearn,lesteve,2015-05-09 00:50:48,"A more self explanatory snippet:

``` python

import numpy as np
import matplotlib.pyplot as plt

import nibabel as nib

from nilearn import plotting

img = nib.Nifti1Image(np.ones((5, 6, 7)), np.eye(4))

plotting.plot_stat_map(img, None, display_mode='z', cut_coords=12)

plt.show()
```

Before I look into the code changes in more details. What do you exactly want to happen when the number of cuts is too high compared to the size of the data in the relevant axis ?

Out of interest, why is that a problem in your case? Do you have some data that is that really that small along an axis (can't remember the default number of cuts for sure but it's something like 7 or 12 I think)?
",nan,nan
5,issue_comment,575,nilearn,nilearn,dohmatob,2015-05-09 07:45:22,"- Have a quick look at the comment at then end of the issue description. I'm afraid it answers you first question. Also the code (including comments) is worth 10 lines and my explanation might be longer (this would not be reasonable).
- Do I have some data with some properties ? Yes, look at the test case above. More seriously, In real life for sure you'll one day have someone throw such data at your plotting API and watch it break.
  Otherwise, then you must roll a docstring saying ""you're forbidden to have very few slices along any axis"".
",nan,nan
3,issue_comment,575,nilearn,nilearn,GaelVaroquaux,2015-05-09 08:35:51,"> Before I look into the code changes in more details. What do you exactly want
> to happen when the number of cuts is too high compared to the size of the data
> in the relevant axis ?

I think that we should shoot a warning and display one cut per slice.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-16 15:10:05,"@lesteve: it's all green, ready to review :)
",nan,nan
15,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 08:33:11,"Pfff...
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(4, '', u'nilearn/_utils/__init__.py')"
16,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 08:47:08,":bow:
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(4, '', u'nilearn/_utils/__init__.py')"
17,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 08:47:45,"Error message update due to code factorization in one function.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(5, '', u'nilearn/tests/test_region.py')"
6,issue_comment,542,nilearn,nilearn,lesteve,2015-04-17 11:13:38,"There still seems to be this bug from #463, is this PR supposed to fix it?

``` python
import numpy as np
from nibabel import Nifti1Image

from nilearn import _utils

affine = np.eye(4)
img_3d = Nifti1Image(np.ones((10, 10, 10)), affine)

input_iterator = iter([img_3d, img_3d])
img_4d = _utils.check_niimg_4d(input_iterator)
img_4d.shape  # (10, 10, 10, 1) instead of (10, 10, 10, 2)

input_iterator = iter([img_3d, img_3d])
img_4d = _utils.check_niimg(input_iterator)
img_4d.shape  # (10, 10, 10, 1) instead of (10, 10, 10, 2)
```
",nan,nan
7,issue_comment,542,nilearn,nilearn,lesteve,2015-04-17 11:16:32,"Forget what I said I was on master rather than on your branch, sorry for the noise !
",nan,nan
18,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 11:47:39,"`niimg` is a Image object, so I guess the function should be called `_index_img` and the variable `img`.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
19,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 11:52:13,"what about calling it ndim_minus_one?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
20,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 11:57:04,"maybe put ""Must be 3 or 4"" in the docstring instead:

ndim: integer {3, 4}, optional
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
21,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 11:57:27,"Fixed.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
22,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 11:58:27,"Fixed.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
23,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:03:35,"assert_equal provides better error when it fails
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/tests/test_niimg_conversions.py')"
24,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:07:03,"could we have a more explicit message checking that 'image' while you are at it ?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/tests/test_niimg_conversions.py')"
25,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:26:03,"Any reason why you removed the caching params from concat_niimgs?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
26,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:29:25,"Good question, the answer is yes since you added a test so we can remove this last line from the comment.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
27,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:32:04,"unnecessary parentheses around the isinstance call
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
28,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:32:26,"unnecessary parentheses around the isinstance call
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
29,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 12:40:48,"accept_4d is not used in this function !

Not sure what you mean with this docstring. Isn't it just that you can concatenate 4D niimg-like images together along the 4th dimension.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
30,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 12:41:43,"I think danilo did it and I didn't put it back...
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
31,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 12:42:54,"Removed. It was never used.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
32,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 13:34:10,"I think 'iterable' is the right word here
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
33,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 13:34:47,"another one of these parentheses ...
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
34,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-17 14:00:46,"`inspect.isgenerator` has some weird corner cases:

``` python
import inspect
import itertools
inspect.isgenerator(itertools.chain('a', 'bc'))  # return False
```

I reckon we should either use:

``` python
if hasattr(niimgs, '__iter__') and not hasattr(niimgs, '__len__')
```

or 

``` python
isinstance(niimgs, collections.Iterator)
```

haven't investigated in detail about this is too many details, TBH.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
35,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-17 14:34:44,"``` python
inspect.isgenerator(itertools.chain('a', 'bc'))  # return False
```

Well, I see no problem here.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
36,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-20 07:43:18,"``` python
import itertools

import numpy as np
from nibabel import Nifti1Image

from nilearn import _utils

affine = np.eye(4)
img_3d = Nifti1Image(np.ones((10, 10, 10)), affine)

input_iterator = itertools.chain([img_3d], [img_3d])
img_4d = _utils.check_niimg_4d(input_iterator)
print(img_4d.shape)  # (10, 10, 10, 2) which is correct
print(img_4d.get_data())  # uninitialised data rather than ones
```

This happens because the first loop to compute the shape works fine but the second loop to set the data never gets run because the iterator has already been consumed in the first one.

All I am trying to say is that the check should be whether `niimgs` is an iterator rather than a generator.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
37,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-20 08:38:00,"Do you think we should fallback on case 2 for iterator or use tee?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
38,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-20 09:16:00,"I think the simplest thing to do is to check whether `niimg` is an iterator since this is a single-line change and the rest of the code stays the same.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
39,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-20 09:34:57,"Using tee is also a single line change...
![your-argument-is-invalid-meme-dumpaday-10](https://cloud.githubusercontent.com/assets/1647301/7227475/443ca6be-e751-11e4-9916-6f1e5e10a5e5.jpg)
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
8,issue_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 09:03:40,"@lesteve ""Meeeerge meeeeee""
",nan,nan
40,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-21 09:39:46,"In some small tests I did itertools.tee seems to work fine with generators so I don't really see the point of having two code paths anymore.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
41,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 09:45:27,"`tee` can yield a signficant memory overhead and, if somebody uses a generator for NiftiImages (well, I see no reason to do that but it may happen), they may not want to deal with that. I see no point in saving memory by pre-allocating memory if we lose it in the copy of the generator.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
42,pull_request_commit_comment,542,nilearn,nilearn,GaelVaroquaux,2015-04-21 10:55:09,"If niimgs is a string, there will be an incomprehensible error further down (as the line above will work).
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
43,pull_request_commit_comment,542,nilearn,nilearn,GaelVaroquaux,2015-04-21 10:56:14,"It would be good to have the filename in the error message ('%r"" % niimg).
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
44,pull_request_commit_comment,542,nilearn,nilearn,GaelVaroquaux,2015-04-21 10:58:01,"Isn't this argument redundant with ndim.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(104, '', u'nilearn/_utils/niimg_conversions.py')"
45,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 11:22:11,"This function is meant to iterate over a list of niimg. It is never called with a filename.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
46,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 11:29:20,"Agreed.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
47,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-21 11:37:03,"Then I guess niimg should not be used. Maybe `_iter_check_imgs(imgs, ...)` would be better. A short docstring would be great as well.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
48,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 11:41:25,"No because we iterate on a list of niimg. I'll add a docstring.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
49,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-21 11:53:34,"Oops sorry for the noise.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
50,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-21 12:03:25,"Not really. ndim is a stronger limitation, atleast_4d is more smooth. ndim = 4 will fail if 3d images is provided.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(104, '', u'nilearn/_utils/niimg_conversions.py')"
51,pull_request_commit_comment,542,nilearn,nilearn,GaelVaroquaux,2015-04-22 05:47:33,"> Not really. ndim is a stronger limitation, atleast_4d is more smooth. ndim = 4
> will fail if 3d images is provided.

I think that the docstring and the name of the argument should be changed
to make this more explicit. How about ""enforce_ndim"", and ""coerce_4d""?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(104, '', u'nilearn/_utils/niimg_conversions.py')"
52,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-24 09:05:19,"I would be more in favor of ""ensure_ndim"". And no specific objection for ""coerce_4d"".
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(104, '', u'nilearn/_utils/niimg_conversions.py')"
11,issue_comment,542,nilearn,nilearn,lesteve,2015-04-27 08:43:41,"Something unintutive I bumped into, check_niimg_3d accepts a list of 3d images and concatenates them:

``` python
import numpy as np
import nibabel as nib
from nilearn import _utils
img_3d = nib.Nifti1Image(np.zeros((10, 10, 10)), np.eye(4))
_utils.check_niimg_3d([img_3d, img_3d]).shape  # (10, 10, 10, 2)
```
",nan,nan
12,issue_comment,542,nilearn,nilearn,lesteve,2015-04-27 08:46:43,"> Something unintutive I bumped into, check_niimg_3d accepts a list of 3d images and concatenates them.

That kind of shows the coverage of check_niimg\* is not great at the moment. Given this is one of the nilearn cornerstones for input checking, it'd be great if that could be improved. Maybe not in this PR though.
",nan,nan
9,issue_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-27 08:54:23,"Yeah, good catch! It is fixed, I'm adding a test. I must admit that I did not improve check_niimg tests, I just added some related to new features.
",nan,nan
86,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-29 14:01:22,"a list -> an iterable

Maybe put the type of the argument for a better error message if we deem that the average user might be confused by the 'iterable' wording.
",6dd6fa2a022458aa495fc89c7203a63793775907,"(6, 142, u'nilearn/_utils/niimg_conversions.py')"
87,pull_request_commit_comment,542,nilearn,nilearn,lesteve,2015-04-29 14:01:29,"`ensure_ndim is not None` not necessary
",6dd6fa2a022458aa495fc89c7203a63793775907,"(4, 140, u'nilearn/_utils/niimg_conversions.py')"
13,issue_comment,542,nilearn,nilearn,lesteve,2015-04-30 08:20:04,"All right let's do this, merging. Thanks a lot for the refactoring effort!
",nan,nan
53,pull_request_commit_comment,542,nilearn,nilearn,banilo,2015-04-30 08:42:47,"a little convoluted
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(51, '', u'nilearn/_utils/niimg_conversions.py')"
54,pull_request_commit_comment,542,nilearn,nilearn,banilo,2015-04-30 08:48:11,"I still think a Is4D() function might be useful. We do this test a number of times across the code.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(126, '', u'nilearn/_utils/niimg_conversions.py')"
55,pull_request_commit_comment,542,nilearn,nilearn,banilo,2015-04-30 08:50:09,"perhaps return niimgs argument in the error message?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(238, '', u'nilearn/_utils/niimg_conversions.py')"
56,pull_request_commit_comment,542,nilearn,nilearn,banilo,2015-04-30 08:57:29,"`nifti_generator()` for consistency?
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(90, '', u'nilearn/tests/test_niimg_conversions.py')"
14,issue_comment,542,nilearn,nilearn,lesteve,2015-04-30 09:00:46,"@banilo you are aware that the PR has been merged right? Feel free to open another PR if you feel strongly about any of your points!
",nan,nan
10,issue_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:02:32,"Nah, no pb. You can put your comments here and I will address them ;).
",nan,nan
57,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:06:50,"Feel free to propose something else! When I put a 2-line condition, people tell that it's a one-liner ;)
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(51, '', u'nilearn/_utils/niimg_conversions.py')"
58,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:08:28,"I tried to grep it and got only one occurence.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(126, '', u'nilearn/_utils/niimg_conversions.py')"
59,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:11:08,"I'm not sure. We do not displayed it because it would be either ""[]"" or nothing (in the case of a functional iterator). So I don't think that it is very useful.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(238, '', u'nilearn/_utils/niimg_conversions.py')"
60,pull_request_commit_comment,542,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:12:06,"Fixed.
",bf94ae7612bdb3a140c8e3d74b90fe0d0e0064ac,"(90, '', u'nilearn/tests/test_niimg_conversions.py')"
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,581,nilearn,nilearn,KamalakerDadi,2015-05-11 12:22:14,"Issue #480 
",nan,nan
6,issue_comment,581,nilearn,nilearn,eickenberg,2015-05-11 12:31:05,"`+np.exp(2*np.pi*1j)`
",nan,nan
7,issue_comment,581,nilearn,nilearn,GaelVaroquaux,2015-05-11 12:52:53,"LGTM. Merging. Thank you
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,524,nilearn,nilearn,satra,2015-03-27 12:48:26,"turns out i can pass vmax - it's not noted in the documentation anywhere.
",nan,nan
4,issue_comment,524,nilearn,nilearn,GaelVaroquaux,2015-03-27 12:54:47,"> it's not noted in the documentation anywhere.

I'll reopen the issue for this reason. I am wondering if we should not
add it explicitely, rather than having it in the hidden kwargs.
",nan,nan
5,issue_comment,524,nilearn,nilearn,AlexandreAbraham,2015-04-17 07:24:19,"I think we should fix this problem ASAP since other people reported it.
",nan,nan
6,issue_comment,524,nilearn,nilearn,lesteve,2015-04-24 13:21:10,"Unfortunate timing: just saw that it has been assigned to Kamalaker but I actually started working on it this morning ...
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,570,nilearn,nilearn,GaelVaroquaux,2015-05-04 12:34:33,"> This issue was brought to my attention by jennifer (and so she has test data).
> I can roll a quick heuristic fix.

It would be awesome. It's a question of doing something like:

<pre>
for component in self.components_:
   if component.max() < -component.min():
      component *= -1
</pre>

With an associated test
",nan,nan
15,issue_comment,570,nilearn,nilearn,eickenberg,2015-05-04 12:45:31,"Isn't there a generic fix for this in scikit-learn? I remember Kyle having
some issues with that for incrementalPCA

On Mon, May 4, 2015 at 2:34 PM, Gael Varoquaux notifications@github.com
wrote:

> > This issue was brought to my attention by jennifer (and so she has test
> > data).
> > I can roll a quick heuristic fix.
> 
> It would be awesome. It's a question of doing something like:
> 
> <pre>
> for component in self.components_:
> if component.max() < -component.min():
> component *= -1
> </pre>
> 
> With an associated test
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/570#issuecomment-98694377.
",nan,nan
16,issue_comment,570,nilearn,nilearn,eickenberg,2015-05-04 12:48:01,"sklearn.utils.extmath.svd_flip

used here
https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/decomposition/incremental_pca.py#L219

The question is whether it gives the right results with respect to what
Gael proposes, which looks like it is neuro-imaging-informed.

On Mon, May 4, 2015 at 2:45 PM, Michael Eickenberg <
michael.eickenberg@gmail.com> wrote:

> Isn't there a generic fix for this in scikit-learn? I remember Kyle having
> some issues with that for incrementalPCA
> 
> On Mon, May 4, 2015 at 2:34 PM, Gael Varoquaux notifications@github.com
> wrote:
> 
> > > This issue was brought to my attention by jennifer (and so she has test
> > > data).
> > > I can roll a quick heuristic fix.
> > 
> > It would be awesome. It's a question of doing something like:
> > 
> > <pre>
> > for component in self.components_:
> > if component.max() < -component.min():
> > component *= -1
> > </pre>
> > 
> > With an associated test
> > 
> > —
> > Reply to this email directly or view it on GitHub
> > https://github.com/nilearn/nilearn/issues/570#issuecomment-98694377.
",nan,nan
17,issue_comment,570,nilearn,nilearn,eickenberg,2015-05-04 12:51:44,"OK it does the same thing https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/utils/extmath.py#L533

Except that it takes both sides of the SVD. It may be able to take `1` as the input for `v` in which case it would be reusable. Otherwise it will have to be cherry-picked.
",nan,nan
8,issue_comment,570,nilearn,nilearn,eickenberg,2015-05-04 13:18:32,"I have no opinion. It was just fyi

On Mon, May 4, 2015 at 3:17 PM, dohmatob elvis dopgima <
notifications@github.com> wrote:

> Seems to me the manual solution proposed by @GaelVaroquaux
> https://github.com/GaelVaroquaux is more transparent. Note also that
> the values of the components are not (and should not be) open to
> interpretation, and the issue raise here is just for visualization purposes.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/570#issuecomment-98702516.
",nan,nan
9,issue_comment,570,nilearn,nilearn,dohmatob,2015-05-07 13:21:57,"OK, I've just checked with @jennifer and the PR produces the expected outcome.

![comp_2](https://cloud.githubusercontent.com/assets/634068/7516029/76d6f0a6-f4cc-11e4-8bb3-85b0f8f89c5a.png)

Without the PR, the signs were flipped and the DMN appeared de-activated.
",nan,nan
4,issue_comment,570,nilearn,nilearn,GaelVaroquaux,2015-05-07 13:34:04,"Forgive me for being stubborn, but the fact that it works for the DMN is not a strong argument.

I would really like to stress that the interpretation of the max heuristic is more clear than that of the sum. In particular, take a network with only one small blob, the sum will be fragile: the background will be contributing more to the decision than the blob. This argument is based on a long experience of running ICA and related algorithms on fMRI.

I'd really like the max heuristic, as mentioned in the description of the issue, rather than the sum heuristic.
",nan,nan
10,issue_comment,570,nilearn,nilearn,eickenberg,2015-05-07 13:37:42,"https://github.com/nilearn/nilearn/pull/571/files#diff-02bccf8e53c6acb92641f710373ebf63R191

this looks like `max` to me
",nan,nan
5,issue_comment,570,nilearn,nilearn,GaelVaroquaux,2015-05-07 13:39:22,"Oops! Please forgive me.
",nan,nan
11,issue_comment,570,nilearn,nilearn,dohmatob,2015-05-07 13:41:49,"Yes, indeed the change from `sum` to `max` has already been made, a few days ago (with appropriate commit messages)

@GaelVaroquaux: The update about the DMN was just meant to show that the PR solves the problem which triggered the issue in the first place...
",nan,nan
6,issue_comment,570,nilearn,nilearn,GaelVaroquaux,2015-05-07 14:02:19,"> Yes, indeed the change from sum to max has already been made, a few days ago
> (with appropriate commit messages)

Yes, my infinit apologies. This was a complete brain fart.
",nan,nan
12,issue_comment,570,nilearn,nilearn,dohmatob,2015-05-07 16:03:33,"No offence taken :)
",nan,nan
13,issue_comment,570,nilearn,nilearn,AlexandreAbraham,2015-05-11 08:28:35,"Fixed by #571 
",nan,nan
7,issue_comment,570,nilearn,nilearn,GaelVaroquaux,2015-05-12 09:48:31,"Hey @dohmatob :

Thanks a lot, the CanICA example now looks much better:
http://nilearn.github.io/auto_examples/connectivity/plot_canica_resting_state.html
",nan,nan
14,issue_comment,570,nilearn,nilearn,dohmatob,2015-05-12 11:05:47,"Nice :)

On Tue, May 12, 2015 at 11:48 AM, Gael Varoquaux notifications@github.com
wrote:

> Hey @dohmatob https://github.com/dohmatob :
> 
> Thanks a lot, the CanICA example now looks much better:
> 
> http://nilearn.github.io/auto_examples/connectivity/plot_canica_resting_state.html
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/570#issuecomment-101217292.

## 

DED
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
6,issue_comment,549,nilearn,nilearn,salma1601,2015-04-19 08:21:57,"Sorry but the range in the cleaned PSC subplot was incorrect, this is the correct one.

![demo_psc](https://cloud.githubusercontent.com/assets/7080143/7218715/8eef503c-e67d-11e4-8291-32c5334bedcf.png)
",nan,nan
3,issue_comment,549,nilearn,nilearn,GaelVaroquaux,2015-04-20 14:54:02,"I think that we have a bug here: the fact that with confounds, the variance of the signal is forgotten is wrong.

I remember that Philippe divided by the standard variance before removing the confounds to give a better conditioning to the confound regression. What we should do is probably multiply back by the standard deviation after confound removal.
",nan,nan
4,issue_comment,549,nilearn,nilearn,GaelVaroquaux,2015-04-20 15:13:27,"Hum, thinking more closely about this, I think that the standardization of the signal is not useful to improve conditioning of confound removal, only that of the confounds.
",nan,nan
7,issue_comment,549,nilearn,nilearn,salma1601,2015-04-23 09:52:03,"I agree that standardization does not improve conditioning of confound removal. Also I guess that _standardize must be changed because with detrend=False and normalize=False the signals are not centered ?
Ok so we get as output of cleaning the raw signal after regressing out the confounds and if one is interested by PSC units he can just get the means from the initial signals and scales the signals.
",nan,nan
5,issue_comment,549,nilearn,nilearn,GaelVaroquaux,2015-04-23 10:03:34,"Hi @salma1601 

Could you have a look at https://github.com/nilearn/nilearn/pull/553 . I think that it should solve your problem.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
6,issue_comment,557,nilearn,nilearn,lesteve,2015-04-23 14:32:51,"The most misleading thing is that 'threshold' is listed in the docstring although it is not supposed to be an acceptable parameter of plot_anat.
",nan,nan
7,issue_comment,557,nilearn,nilearn,lesteve,2015-04-24 09:04:10,"I remove 'threshold' from the docstring in b56dc9f. Do we consider that good enough for now and close this issue?
",nan,nan
3,issue_comment,557,nilearn,nilearn,GaelVaroquaux,2015-04-24 09:08:13,"> I remove 'threshold' from the docstring in b56dc9f. Do we consider that good
> enough for now and close this issue?

No, I'd rather have a sane behavior. It's fairly easy to implement.
",nan,nan
8,issue_comment,557,nilearn,nilearn,lesteve,2015-04-24 11:23:11,"> No, I'd rather have a sane behavior. It's fairly easy to implement.

I don't know, why would a user pass a threshold parameter if it is not listed as an explicit parameter and not documented?

Maybe the simplest thing to do is actually to go the other way on this one: allow an optional 'threshold' parameter that defaults to None (i.e. not thresholded) in plot_anat ?

My contention with having some kwargs logic is that it is rather brittle. For example should we protect against resampling_interpolation being passed into the kwargs as well? Should we do this only in plot_anat or also in other plot_ functions that set threshold to a fixed value internally?
",nan,nan
5,issue_comment,557,nilearn,nilearn,KamalakerDadi,2015-05-08 12:11:45,"As @lesteve was saying, included the optional argument ""threshold=None"" in function plot_anat. It seems to behave normally by trying with three thresholds ""None"", ""auto"", ""0"". 

``` python
display = plotting.plot_anat()
display = plotting.plot_anat(threshold=0)
display = plotting.plot_anat(threshold='auto')
```

I got the same output as below:

![none](https://cloud.githubusercontent.com/assets/11410385/7536032/08b13fee-f58c-11e4-88ba-91aaa197fd90.png)

are we good enough for a pull request ?
",nan,nan
4,issue_comment,557,nilearn,nilearn,GaelVaroquaux,2015-05-11 20:18:44,"Fixed by #582
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
9,issue_comment,568,nilearn,nilearn,banilo,2015-05-02 08:52:03,"@AlexandreAbraham Is this what you had in mind?
",nan,nan
8,issue_comment,568,nilearn,nilearn,AlexandreAbraham,2015-05-02 16:08:14,"Yes this is good but we lose the warning. We have to find a way to raise it even if we use the iterator.
",nan,nan
12,pull_request_commit_comment,568,nilearn,nilearn,bthirion,2015-05-02 19:49:32,"maybe 'niimg_iter' rather than `my_iter`
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/input_data/base_masker.py')"
13,pull_request_commit_comment,568,nilearn,nilearn,GaelVaroquaux,2015-05-03 10:01:30,":+1:
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/input_data/base_masker.py')"
5,issue_comment,568,nilearn,nilearn,GaelVaroquaux,2015-05-03 10:03:34,"Agreed with the comments above: looks good in general, but it's a pity to lose the warning.
",nan,nan
10,issue_comment,568,nilearn,nilearn,banilo,2015-05-03 11:41:29,"How about a warning in _iter_... if verbose > 0?

> On 03 May 2015, at 12:03, Gael Varoquaux notifications@github.com wrote:
> 
> Agreed with the comments above: looks good in general, but it's a pity to lose the warning.
> 
> —
> Reply to this email directly or view it on GitHub.
",nan,nan
11,issue_comment,568,nilearn,nilearn,banilo,2015-05-03 20:03:29,"Comment addressed.
",nan,nan
6,issue_comment,568,nilearn,nilearn,banilo,2015-05-04 14:32:47,"> Agreed with the comments above: looks good in general, but it's a pity to lose the warning.

I just restored the warning in _iter_check_niimg.
",nan,nan
14,pull_request_commit_comment,568,nilearn,nilearn,AlexandreAbraham,2015-05-04 22:33:36,"This warning will pop up in a lot of wrong cases.
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
15,pull_request_commit_comment,568,nilearn,nilearn,GaelVaroquaux,2015-05-05 07:25:51,"+1. We cannot have it that way.
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
16,pull_request_commit_comment,568,nilearn,nilearn,banilo,2015-05-05 07:28:24,"Suggestions?

2015-05-05 9:25 GMT+02:00 Gael Varoquaux notifications@github.com:

> In nilearn/_utils/niimg_conversions.py
> https://github.com/nilearn/nilearn/pull/568#discussion_r29647942:
> 
> > @@ -77,6 +78,9 @@ def _iter_check_niimg(niimgs, ensure_ndim=None, atleast_4d=False,
> >              if not _check_fov(niimg, ref_fov[0], ref_fov[1]):
> >                  if target_fov is not None:
> >                      from nilearn import image  # we avoid a circular import
> > -                    warnings.warn('Affine is different across subjects.'
> > -                                  ' Realignement on first subject '
> > -                                  'affine forced')
> 
> +1. We cannot have it that way.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/pull/568/files#r29647942.

## 

Viele Grüße,
Danilo
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
17,pull_request_commit_comment,568,nilearn,nilearn,AlexandreAbraham,2015-05-05 08:47:41,"Fix the problem! (we can talk about it tomorrow ;))
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
18,pull_request_commit_comment,568,nilearn,nilearn,GaelVaroquaux,2015-05-05 16:38:53,"Call me dense, but looking at the code,  I don't see when this condition is true. 
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
19,pull_request_commit_comment,568,nilearn,nilearn,AlexandreAbraham,2015-05-06 07:48:29,"Neither do I. Plus, it is false, we don't want the warning to be raised each time resampling on first image is asked: it may be asked but never applied.
",50771ca6c65b5fd811b50bb3ec6edfd94b27a2e3,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
7,issue_comment,568,nilearn,nilearn,AlexandreAbraham,2015-05-07 07:20:52,"Works like a charm! Thanks.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,569,nilearn,nilearn,banilo,2015-06-24 13:53:30,"So everybody ok with me removing this class from nilearn?
",nan,nan
4,issue_comment,569,nilearn,nilearn,arthurmensch,2015-06-30 17:02:26,"I am using `MultiNiftiMasker` to load large datasets, it is especially useful as it provides seemless parallelization. Should we make it an option in `NiftiMasker` and add parallelization to `NiftiMasker` ?
",nan,nan
5,issue_comment,569,nilearn,nilearn,banilo,2015-07-01 12:09:06,"> I am using MultiNiftiMasker to load large datasets, it is especially useful as it provides seemless parallelization. Should we make it an option in NiftiMasker and add parallelization to NiftiMasker ?

Sounds good. Or even in some broader framework, add an iter_img-ish function that helps perform various image manipulations in a multi-process context...?
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
12,pull_request_commit_comment,585,nilearn,nilearn,bthirion,2015-05-23 20:41:09,"Could you add parentheses to help parsing ? I'm not sure I get ti right.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
13,pull_request_commit_comment,585,nilearn,nilearn,bthirion,2015-05-23 20:41:46,"And if this is not too complicated, explain the logic...
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
14,pull_request_commit_comment,585,nilearn,nilearn,bthirion,2015-05-23 20:45:53,"In general, what is the strategy to set memory_level / func_memory elvel to 1 or 2 ? Should there be a pragraph on it in the doc ?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_masker.py')"
5,issue_comment,585,nilearn,nilearn,bthirion,2015-05-23 20:46:28,"Please notice a travis failure on Python 3.
",nan,nan
15,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-05-23 22:19:08,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
16,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-05-23 22:24:13,"Each function has a reference memory_level (func_memory_level). If the user memory_level if equal or greater to func_memory_level, then the function is cached. The goal is, for example, to have several layers of caching. In NiftiMasker:
- level 1 only cache the output (masked data)
- level 2 will cache intermediate step of the pretreatment.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_masker.py')"
17,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-09 09:07:34,"While you are at it: typo here grater -> gr**e**ater
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
18,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-09 09:10:40,"Looks like you meant to make both `func_memory_level` and `memory_level` parameters required but didn't do it in the function signature.

Also just wondering whether something more explicit than func_memory_level could be used ... No great suggestions other than reference_memory_level though.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
19,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-09 09:15:15,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
20,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-09 09:17:15,"Is there a standard way to precise that in the doc?

Also, I'm not fond of this name but it already changed twice...
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
21,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-09 09:34:26,"You are only checking half of your comment. Maybe something like that:

``` python
memory_params = [memory_level, func_memory_level]
both_params_integers = all(isinstance(param, int) for param in memory_params)
both_params_none = all(param is None for param in memory_params)

if not (both_params_integers or both_params_none):
    raise ValueError(...)
```
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
22,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-09 11:06:30,"Sorry I wasn't clear what I meant is that you didn't do what you announced in the description of the PR.

> In CacheMixin, make memory levels mandatory for function _cache. It is logic and they are never used without them.

Both `func_memory_level` and `memory_level` are still optional parameters atm ...
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
23,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-09 11:28:45,"> In CacheMixin, make memory levels mandatory for function **_cache**. It is logic and they are never used without them.

I talk about function `_cache`, for which `func_memory_level` is now a mandatory parameter. `cache` is another function and can be called without them.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
24,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-09 11:35:46,"I like your version. Replaced!
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
25,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-12 11:54:33,"Fair enough, but then func_memory_level is optional and the docstring should be consistent.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
26,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-12 11:54:50,"same thing here, optional shouldn't have been removed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
27,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-12 11:59:32,"Fixed.

On Fri, Jun 12, 2015 at 1:54 PM, Loïc Estève notifications@github.com
wrote:

> In nilearn/_utils/cache_mixin.py
> https://github.com/nilearn/nilearn/pull/585#discussion_r32309405:
> 
> > ```
> >      The memory_level from which caching must be enabled for the wrapped
> >      function.
> > ```
> > -    memory_level: int, optional
> > -    memory_level: int
> 
> same thing here, optional shouldn't have been removed.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/pull/585/files#r32309405.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
28,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-12 12:00:09,"Any reason why you changed func_memory_level in this file? Used to be 1 now is 2.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
29,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-12 13:54:13,"Good point! The logic is that at level 1, only the signals should be cached. And at level 2, all intermediate steps should be cached. But the level 1 is missing here.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
6,issue_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-23 12:14:22,"@lesteve Ready for next round ;)
",nan,nan
7,issue_comment,585,nilearn,nilearn,lesteve,2015-06-23 14:20:36,"> @lesteve Ready for next round ;)

Not clear to me what the target_resampling=None has to do with this PR. Can you enlighten me ?
",nan,nan
8,issue_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-23 14:23:34,"The code handling `target_resampling` was really messy and prevented me to do proper caching. I had to refactor it. I took this occasion to make it clearer.
",nan,nan
9,issue_comment,585,nilearn,nilearn,lesteve,2015-06-24 06:37:46,"Looks like you need a rebase to fix the merge conflict.
",nan,nan
30,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:15:44,"For better or worse it seems that logger is used consistently in this file. Not sure that this PR is the right place to replace logger.log by print statements.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
31,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:24:10,"The use of itertools.combinations looks quite smart but you could just take the first image and make sure it has the same field of view as the remaining ones, couldn't you ?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
32,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:24:54,"It is a bit of a shame that _assert_same_fov doesn't reuse _check_same_fov given their similar functionality.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
33,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:28:15,"Don't you need to add more ignored parameters, for example memory and memory_level?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
34,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:28:33,"Maybe a short docstring would be nice
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
35,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:34:39,"Just curious, where is `_resampled_labels_img_` likely to be set prior to this statement?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(72, '', u'nilearn/input_data/nifti_labels_masker.py')"
36,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:41:44,"Seems very similar to _extract_signals in nifti_labels_masker.py. Maybe worth looking at some refactoring here.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(21, '', u'nilearn/input_data/nifti_maps_masker.py')"
37,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 07:43:52,"Do you need to ignore memory and memory_level here?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
38,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 08:07:30,"`assert_equal(a, b)` gives slightly nicer error messages than `assert_true(a == b)`.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/tests/test_cache_mixin.py')"
39,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 08:11:11,"Looking at it a bit closer, maybe from multiple calls to transform ?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(72, '', u'nilearn/input_data/nifti_labels_masker.py')"
40,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:09:35,"This is a PR to fix bugs so I took the occasion to fix other problems. I can remove it if it's necessary though.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
41,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:10:50,"It's possible but I wanted to have the best error message possible. Note that this function is called with one or two params.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
42,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:12:37,"They can be merged if I add a parameter to raise an error.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
43,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:17:40,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
44,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:19:15,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
45,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:19:43,"Yes. It is a caching system for multiple calls.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(72, '', u'nilearn/input_data/nifti_labels_masker.py')"
46,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:20:36,"Fixed
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
47,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 09:22:52,"I'm afraid to fix stuff since people tell me that it should be part of another PR :P.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/tests/test_cache_mixin.py')"
48,pull_request_commit_comment,585,nilearn,nilearn,lesteve,2015-06-24 10:53:24,"Can you remind me what was the problem with the logger?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
49,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-24 11:35:07,"Nothing but the fact that it is not consistant with the rest of the API. I know that we once talked about removing it. Gaël has also suggested another logging system to replace it.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_maps_masker.py')"
10,issue_comment,585,nilearn,nilearn,lesteve,2015-06-25 12:08:16,"FYI this PR needs a rebase.
",nan,nan
50,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-30 14:07:01,"Merged.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
51,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-06-30 15:29:53,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/tests/test_cache_mixin.py')"
52,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-02 10:53:23,"Yes, but this is not the point of this PR. This is not as trivial as it seems. In particular, this is not the only code that can be factorized. It can be merged with the code coming from NiftiSpheresMasker and Searchlight (which have very similar code too). I was thinking of a BaseElementMasker that iterates on some kind of ROI iterator (list of ROI or labels or maps). But this require a lot of work. This is the step after!
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(21, '', u'nilearn/input_data/nifti_maps_masker.py')"
53,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:37:01,"That function needs a better docstring. First, the notion of ""equivalence"" of images should be made explicit (am I right in understanding that its: same shape and affine?). Second, what the kwargs are should be detailed.

It doesn't have to be of the quality of user-facing docs, it's more a question of devs easily understanding what the function does.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
54,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:40:46,"I would prefer, for readability, still having the name of the keyword argument in the code. It serves to explain what the '1' means.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/multi_nifti_masker.py')"
55,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:41:04,"Same remark about keeping the name of the kwarg.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/multi_nifti_masker.py')"
56,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:48:13,"I'd be happier with the kwarg being explicit :)
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
57,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:48:55,"I think that in English, this is know as 'pre-processing"". ""Treatement"" being a bad translation.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
58,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 09:53:27,"Is there a specific reason that you removed the default value?
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
59,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:13:56,"I just wanted to make it explicit and mandatory. No strong feelings about that.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
60,pull_request_commit_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 10:15:05,"> I just wanted to make it explicit and mandatory. No strong feelings about that.

I'd rather not bother people if they are not thinking about this kind of
problem: it's a valid usecase to want to cache without controling the
granularity.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/cache_mixin.py')"
61,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:21:54,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/_utils/niimg_conversions.py')"
62,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:27:14,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/multi_nifti_masker.py')"
63,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:27:18,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/multi_nifti_masker.py')"
64,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:27:30,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
65,pull_request_commit_comment,585,nilearn,nilearn,AlexandreAbraham,2015-07-13 10:28:38,"Fixed.
",07366be1a0638c957e3b56dcc930d2909c4c505b,"(None, '', u'nilearn/input_data/nifti_labels_masker.py')"
11,issue_comment,585,nilearn,nilearn,GaelVaroquaux,2015-07-13 12:40:43,"OK. Thx. Merging.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
5,issue_comment,582,nilearn,nilearn,KamalakerDadi,2015-05-11 14:09:37,"issue #557 
",nan,nan
6,issue_comment,582,nilearn,nilearn,GaelVaroquaux,2015-05-11 16:47:42,"This looks good. I'll merge once the travis built has run.
",nan,nan
7,issue_comment,582,nilearn,nilearn,KamalakerDadi,2015-05-11 16:49:26,"Ok cool. Thanks
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
11,pull_request_commit_comment,583,nilearn,nilearn,AlexandreAbraham,2015-05-11 21:54:40,"PEP8
",99d24ca854659043651cc1ca4e83a3621deffd2d,"(116, '', u'nilearn/plotting/img_plotting.py')"
12,pull_request_commit_comment,583,nilearn,nilearn,AlexandreAbraham,2015-05-11 21:55:04,"For code factorization.
",99d24ca854659043651cc1ca4e83a3621deffd2d,"(12, '', u'nilearn/_utils/ndimage.py')"
13,pull_request_commit_comment,583,nilearn,nilearn,AlexandreAbraham,2015-05-11 21:55:36,"No code modification, just reordering stuff in order to simplify the code.
",99d24ca854659043651cc1ca4e83a3621deffd2d,"(21, '', u'nilearn/plotting/img_plotting.py')"
5,issue_comment,583,nilearn,nilearn,GaelVaroquaux,2015-05-12 05:27:05,"LGTM. Merging (just in time for 0.1.3)
",nan,nan
6,issue_comment,583,nilearn,nilearn,AlexandreAbraham,2015-05-12 07:52:26,"Well, I waited for this one because I did not want to merge last minute stuff in 0.1.3... But anyway, there is modification of logic so there should be no problem ;)
",nan,nan
7,issue_comment,583,nilearn,nilearn,GaelVaroquaux,2015-05-12 07:53:40,"> Well, I waited for this one because I did not want to merge last minute stuff
> in 0.1.3...

I am still not finished releasing. Hopefully next hour.

> But anyway, there is modification of logic so there should be no
> problem ;)

I looked at the code twice. Another review would good.
",nan,nan
14,pull_request_commit_comment,583,nilearn,nilearn,bthirion,2015-05-12 08:27:38,"This part is slightly tricky, and will probably not fit every use case. On the other hand, explaining the logic of this code is harder than reading it.
",99d24ca854659043651cc1ca4e83a3621deffd2d,"(107, '', u'nilearn/plotting/img_plotting.py')"
8,issue_comment,583,nilearn,nilearn,bthirion,2015-05-12 08:28:27,"I don't see any issue by eye...
",nan,nan
9,issue_comment,583,nilearn,nilearn,GaelVaroquaux,2015-05-12 08:30:15,"> I don't see any issue by eye...

Thanks for the review, @bthirion!
",nan,nan
10,issue_comment,583,nilearn,nilearn,eickenberg,2015-05-12 08:34:01,"I can't see anything wrong with this either
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
8,pull_request_commit_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 11:01:32,"Oops: you are modifying in place the output here. I'll fix ths.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(None, '', u'nilearn/signal.py')"
5,issue_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 12:45:49,"This is ready to go, as far as I am concerned.

Somebody, a review? @AlexandreAbraham ?
",nan,nan
9,pull_request_commit_comment,580,nilearn,nilearn,AlexandreAbraham,2015-05-11 13:03:42,"I got an headache trying to find out if a copy is done in all the call tree. I would either:
- do an explicit copy at the beginning of the function, and the rest inplace
- do everything inplace and make an explicit copy above

For the moment, there is a bug since the code expects _standardize to do a copy of signals and the copy is not done if no treratment is requested.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(None, '', u'nilearn/signal.py')"
10,pull_request_commit_comment,580,nilearn,nilearn,AlexandreAbraham,2015-05-11 13:04:07,"I trust you on this one.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(41, '', u'nilearn/signal.py')"
11,pull_request_commit_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:07:59,"Good point. This copy wasn't necessary. I got confused by the merge mess.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(None, '', u'nilearn/signal.py')"
12,pull_request_commit_comment,580,nilearn,nilearn,eickenberg,2015-05-11 13:10:59,"that part is fine: What we want is the projector `confounds.dot(np.linalg.pinv(confounds)).dot(signals)`, which is `confounds.dot(pinv(confounds.T.dot(confounds))).dot(confounds.T).dot(signals)`, which amounts to what is written, because `confounds = Q.dot(R)` and `confounds.T.dot(confounds) = R.T.dot(Q.T).dot(Q).dot(R)` and `Q` disappears because it is orthogonal.

But as mentioned in an outside comment, this would have been handled by `confounds.dot(pinv(confounds).dot(signal))` also. The only question is where `pinv` cuts off singular values. AFAIK this is at `1e-15`.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(41, '', u'nilearn/signal.py')"
13,pull_request_commit_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:14:08,"How about we cut our losses here and stop discussing minute details to
focus on the big picture: the problem is solved, and we want to release
0.1.3 to get bug fixes out to our users.

You may perfectly be right. I would welcome a PR with corresponding
timings showing that it is possible to simplify the code with the same
numerical stability and speed. But in the mean time, I really want to get
0.1.3 out.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(41, '', u'nilearn/signal.py')"
14,pull_request_commit_comment,580,nilearn,nilearn,AlexandreAbraham,2015-05-11 13:22:35,"Yeah, I think that writing down the equations in a comment would be easier to read than the code and would allow us to double check  the logic more easily. We can create a PR in that sense. In the meantime, let's merge it.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(41, '', u'nilearn/signal.py')"
15,pull_request_commit_comment,580,nilearn,nilearn,eickenberg,2015-05-11 13:28:53,"I totally agree. The code works, which is the most important part. My comments are entirely for future readability reasons, and this only speaking for my `pinv`-biased point of view, so they probably don't even generalize to other people.

+1 from my side for merging this.
",2df12d7a2d295d14288d825f25977cd353db9c3e,"(41, '', u'nilearn/signal.py')"
6,issue_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:31:58,"I'll wait for travis to finish before merging.
",nan,nan
7,issue_comment,580,nilearn,nilearn,GaelVaroquaux,2015-05-11 15:20:28,"Travis finished. I am merging.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
13,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:18:29,"Could you please revert the changes to this file: I want this example to remain as simple as possible (ideally, you would also remove all references to multi-subject that were lying around, as the 'Concatenate...' comment, and the renaming of data_masked to fmri_masked).
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state.py')"
14,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:19:31,"We are now using ""import matplotlib.pyplot as plt""
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
15,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:20:04,"Let's not count the time it takes to fetch data, just to make the example simpler.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
16,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:21:04,"Please cite the Craddock 2012 in the docstring.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
17,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2013-11-27 12:21:33,"So I revert it back to a single subject example ?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state.py')"
4,issue_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:22:23,"I finished my review. Looks cool! Only minor comments.
",nan,nan
18,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2013-11-27 12:22:47,"Yes, I just put this description quickly. I think we also should make a documentation page on this example ? (or extend the one talking about the Ward ?)
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
19,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:24:11,"> So I revert it back to a single subject example ?

Yes please. The goal of this example is to demo the simplest possible
usage of the nilearn API in unsupervised setting. We should say in the
docstring that for actual usage, the canica example should be used.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state.py')"
20,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2013-11-27 12:25:03,"> I think we also should make a documentation page on this example ? (or
> extend the one talking about the Ward ?)

Indeed. We need to extend the page
http://nilearn.github.io/data_analysis/parcellating.html
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
8,issue_comment,141,nilearn,nilearn,AlexandreAbraham,2014-03-20 21:12:25,"@GaelVaroquaux : I put a minimal documentation. Please tell me if it is enough or if I should make it more verbose.
",nan,nan
21,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2014-03-20 23:05:34,"Typo: ""therefore"" (e at the end).
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'doc/data_analysis/parcellating.rst')"
22,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-03-22 20:33:24,"each edge value represents
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'doc/data_analysis/parcellating.rst')"
23,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-03-22 20:38:33,"SyntaxError: Non-ASCII character '\xe2' in file /home/bertrand/mygit/nilearn/plot_rest_spectral.py on line 13, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details

I think that it is due to 1914-1928
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
24,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-03-22 20:46:36,"Please comment on the role of smoothing to make spectral clustering work.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
25,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-03-22 21:08:57,"This takes more 30 minutes on my laptop. I give up
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
26,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2014-03-24 13:02:34,"> This takes more 30 minutes on my laptop. I give up

Alex, I think that you are going to have to rely on the (horrible) trick
used by Cameron: threshold the correlations to have connections and thus
speed up the algorithm.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
27,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2014-03-24 14:41:11,"I've already done that, but the threshold is too low. Do you think I should put a hard threshold, on do another approach, like taking the 10% highest ?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
28,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2014-03-24 14:42:06,"> I've already done that, but the threshold is too low. Do you think I
> should put a hard threshold, on do another approach, like taking the
> 10% highest ?

A percentile looks good. Take whatever is necessary to make the example
run in 10mn.

G
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
9,issue_comment,141,nilearn,nilearn,AlexandreAbraham,2014-09-16 13:26:12,"This PR is old so I should use the visualization functions in the example script rather than `imshow`.

@lesteve, apart from that, any comment on this PR?
",nan,nan
11,issue_comment,141,nilearn,nilearn,lesteve,2014-09-16 18:10:23,"Anything in particular you want me to have a look at? Basically just trying to maximise the likelihood of being useful, given that I don't know too much about the motivations behind this PR.
",nan,nan
29,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 08:55:59,"What is the difference between plot_ica_resting_state_.py (with an underscore) and plot_ica_resting_state.py (without an underscore)?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state_.py')"
30,pull_request_commit_comment,141,nilearn,nilearn,GaelVaroquaux,2014-09-17 08:56:44,"> What is the difference between plot_ica_resting_state_.py (with an underscore)
> and plot_ica_resting_state.py (without an underscore)?

Looks like a bug to me.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state_.py')"
31,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 08:56:46,"Should the comment say z=25?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_clustering.py')"
32,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 09:24:19,"each edge value represent**s**
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'doc/data_analysis/parcellating.rst')"
33,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 09:27:12,"Is the comment and the next line still needed since only one subject is used?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state.py')"
34,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 09:31:26,"Just curious, any reason not to get rid of the np.where, i.e.:

```
rows = rows[values >= thr]
```

Same thing for the two lines below
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
35,pull_request_commit_comment,141,nilearn,nilearn,lesteve,2014-09-17 09:36:24,"What about simplifying using:

``` python
values[i] = 0. if np.isnan(corr) else corr
```

instead of the if + continue.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
12,issue_comment,141,nilearn,nilearn,lesteve,2014-09-17 14:03:52,"Not sure how much that matters but another thing I noticed is that there is a warning emitted when running plot_rest_spectral.py:

Graph is not fully connected, spectral embedding may not work as expected.
",nan,nan
36,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2014-09-22 19:19:09,"Well, this is a bug in the naming. Both of them do different things but both of them should not be included in this PR.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_ica_resting_state_.py')"
10,issue_comment,141,nilearn,nilearn,AlexandreAbraham,2014-09-22 20:11:31,"The warning is a side effect of the sparsification of the affinity matrix. To solve that, the spectral clustering will create edges of very low weight between random nodes of unconnected clusters. Problems will appear if your threshold is too high.
",nan,nan
37,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2014-09-22 20:12:22,"Fixed.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
38,pull_request_commit_comment,141,nilearn,nilearn,AlexandreAbraham,2014-09-22 20:12:31,"Fixed.
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
39,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-10-01 09:26:14,"Do we care about the timing information ? I'd like to remove this, as it clutters the examples . The example is pretty fast anyway. 
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_clustering.py')"
40,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-10-01 09:29:09,"Is this intense smoothing really necessary ?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
41,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-10-01 09:30:33,"Again, I'd remove timing information -- but we should look at reducing it as spectral clustering is really slow atm. 
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
42,pull_request_commit_comment,141,nilearn,nilearn,bthirion,2014-10-01 09:36:03,"Use the plot_roi function ?
",a6cdc209ea8d480c911a97316ec2595f3bd3cf82,"(None, '', u'plot_rest_spectral.py')"
5,issue_comment,141,nilearn,nilearn,bcipolli,2015-02-22 23:49:41,"@AlexandreAbraham I would like to play around with this example.  Do you mind if I rebase it to master and migrate it to some of the newer nilearn tools?  I could submit a PR to your branch with the changes.
",nan,nan
6,issue_comment,141,nilearn,nilearn,AlexandreAbraham,2015-02-23 00:05:38,"@bcipolli No pb. But note that this wasn't merged because the example required too much time to give acceptable results.
",nan,nan
7,issue_comment,141,nilearn,nilearn,AlexandreAbraham,2015-05-07 08:58:29,"Superseded by #517.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,561,nilearn,nilearn,AlexandreAbraham,2015-04-27 10:41:09,"Thanks, this is very kind of you to crawl the code and highlight such problems! Could you provide a small script that reproduce the problem?
",nan,nan
4,issue_comment,561,nilearn,nilearn,salma1601,2015-04-27 12:13:16,"It is with great pleasure ! plus I saw it spontaneously working on ADHD since it has a constant confound in the .csv confounds file. This is the code showing regression works well only when full rank confounds

``` Python
import numpy as np
from scipy.linalg import lstsq
from nilearn.signal import clean, _standardize
from nilearn.tests.test_signal import generate_signals

# Generate a normalized signal
length = 30
signal, noise, confounds = generate_signals(n_features=1, n_confounds=5,
                                            length=length)
to_clean = _standardize(signal + noise, detrend=False, normalize=True)

# Generate full rank confounds, with a confound non present in the signal
confounds_full = np.hstack((confounds, np.random.rand(length, 1)))

# Generate non-full rank confounds
confounds_twice = np.hstack((confounds,
                             confounds[:, -1][:, np.newaxis]))
confounds_cst = np.hstack((confounds, np.ones((length, 1))))


# Compare with scipy residuals
for confounds in [confounds_full, confounds_twice, confounds_cst]:
    # Standardize the confounds, as done in signal.clean
    confounds = _standardize(confounds, detrend=False, normalize=True)
    cleaned_signal = clean(to_clean, confounds=confounds, detrend=False,
                           standardize=False)
    beta = lstsq(confounds, to_clean)[0]
    residual = to_clean - confounds.dot(beta)
    print('{0} confounds, rank is {1}, mismatch is {2}'.format(
        confounds.shape[-1],
        np.linalg.matrix_rank(confounds),
        np.max(np.abs(cleaned_signal - residual))))
```
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
11,pull_request_commit_comment,562,nilearn,nilearn,banilo,2015-04-28 13:04:57,"A possible alternative explanation for vmin/vmax would be:

`A lower/bigger bound filter that pushes any map value up/down smaller/bigger than vmin/max towards vmin/vmax.`

mention the analogy to np.clip()?

""Given an interval, values outside the interval are clipped to
the interval edges.  For example, if an interval of `[0, 1]`
is specified, values smaller than 0 become 0, and values larger
than 1 become 1.""
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
10,issue_comment,562,nilearn,nilearn,banilo,2015-04-28 13:12:01,"looks good.

Should there be a new test for this?
",nan,nan
12,pull_request_commit_comment,562,nilearn,nilearn,GaelVaroquaux,2015-04-28 14:03:45,"lower/upper bound is probably a better phrasing.

Analogy to np.clip is probably not usable for our non-advanced users. The advanced one should understand vmin, vmax as it is standard.
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
9,issue_comment,562,nilearn,nilearn,lesteve,2015-04-30 08:42:21,"> Should there be a new test for this?

Not necessary vmin and vmax could already be passed through the kwargs. This PR is mostly documenting this fact.
",nan,nan
13,pull_request_commit_comment,562,nilearn,nilearn,banilo,2015-04-30 09:03:03,"Somebody likes the Huttinger slides :-P
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(16, '', u'nilearn/plotting/displays.py')"
14,pull_request_commit_comment,562,nilearn,nilearn,banilo,2015-04-30 09:06:31,"Since glass brain does not currently support negative values, do we need some additional test, not required for the other plot_*?
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(274, '', u'nilearn/plotting/img_plotting.py')"
15,pull_request_commit_comment,562,nilearn,nilearn,banilo,2015-04-30 09:08:06,"There appears to be a grammatical error here.

""function argument passed to"" -> 231.000 hits on google
""function argument passed on to"" -> 120.000.000 hits on google

Should we correct this in the entire nilearn code?
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
16,pull_request_commit_comment,562,nilearn,nilearn,AlexandreAbraham,2015-04-30 09:14:20,"PR welcome ;)
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
17,pull_request_commit_comment,562,nilearn,nilearn,lesteve,2015-04-30 11:27:43,"You are aware than ""function argument passed on to"" gets the quote removed, right? The ratio is way too good to be true.

Not sure how robust these kind of comparisons in general are but I get:

""passed on to"" python
167 000 results

""passed to"" python
470 000 results
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
18,pull_request_commit_comment,562,nilearn,nilearn,lesteve,2015-04-30 11:32:48,"Actually it took me a little while to remember why I did that but this is supposed to catch these two cases:
- vmin has not be passed into the kwargs
- vmin=None has been passed into the kwargs
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(16, '', u'nilearn/plotting/displays.py')"
19,pull_request_commit_comment,562,nilearn,nilearn,lesteve,2015-04-30 11:33:50,"basically equivalent for `'vmin' not in kwargs or kwargs['vmin'] is None`
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(16, '', u'nilearn/plotting/displays.py')"
6,issue_comment,562,nilearn,nilearn,lesteve,2015-05-09 00:10:28,"I tweaked the documentation of vmin/vmax parameters and feel this is ready to merge. Comments welcome!
",nan,nan
20,pull_request_commit_comment,562,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:35:31,"If you want to change this, I would rather go for matplotlib.pyplot.imshow, for things to be googleable by someone who is not versed in the shorthands of Python devs.
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
21,pull_request_commit_comment,562,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:35:46,"Same remarks: maptlotlib.pyplot
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
22,pull_request_commit_comment,562,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:36:15,"matplotlib.pyplot
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
23,pull_request_commit_comment,562,nilearn,nilearn,GaelVaroquaux,2015-05-09 09:37:32,"Isn't that really fragile: if I pass vmin=0, it will use anat_vmin. I think that I would prefer something more explicit.
",92421158ee561cce8c36c16724c6c9b1bbac2e22,"(None, '', u'nilearn/plotting/img_plotting.py')"
7,issue_comment,562,nilearn,nilearn,bthirion,2015-05-10 19:08:51,"besides making 'plt' more explicit with 'matplotlib.pyplot', I have no objection.
",nan,nan
8,issue_comment,562,nilearn,nilearn,lesteve,2015-05-10 22:08:48,"Replaced plt by matplotlib.pyplot and fixed the fragile vmin/vmax assignment.
",nan,nan
5,issue_comment,562,nilearn,nilearn,GaelVaroquaux,2015-05-11 05:10:04,"Thank you. Merging!
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
4,issue_comment,563,nilearn,nilearn,GaelVaroquaux,2015-05-07 14:39:55,"@salma1601 : thanks a lot.

The tests are not passing on scipy 0.9.0, which we must support as it is the standard version in one of the ubuntu distributions that we support.

The reason is trivial: the 'pivoting' argument to scipy.linalg.qr was added in version 0.10.1.

The solution is to test for the version of scipy, and use the 'pivoting' only if the version is greater. One example of such code to do this can be found on 
https://github.com/nilearn/nilearn/blob/master/nilearn/decomposition/canica.py#L153

Thanks!
",nan,nan
8,issue_comment,563,nilearn,nilearn,eickenberg,2015-05-11 12:57:54,"I may be completely mistaken, but the problem may not have crept up if `signal -= confounds.dot(np.linalg.lstsq(confounds, signal)[0])` or `signal -= confounds.dot(np.linalg.pinv(confounds).dot(signal))` had been used instead of the lower-level QR decomp technique.
",nan,nan
5,issue_comment,563,nilearn,nilearn,GaelVaroquaux,2015-05-11 12:59:24,"Yes, but the QR is significantly faster. The Leipzig people were impressed at how fast this was.
",nan,nan
9,issue_comment,563,nilearn,nilearn,eickenberg,2015-05-11 13:01:33,"Why is it faster? Computing the decomposition vs computing the pinv can
hardly be the problem. The re-multiplications afterwards are of exactly the
same shape.

On Mon, May 11, 2015 at 2:59 PM, Gael Varoquaux notifications@github.com
wrote:

> Yes, but the QR is significantly faster. The Leipzig people were impressed
> at how fast this was.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/pull/563#issuecomment-100898673.
",nan,nan
6,issue_comment,563,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:03:13,"OK, maybe not faster. I just know that it is the recommended way of doing it.
",nan,nan
7,issue_comment,563,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:30:26,"Closing this PR as superseeded by #580 
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
7,pull_request_commit_comment,564,nilearn,nilearn,AlexandreAbraham,2015-04-29 13:54:06,"Trailing spaces are not PEP8. You should add automatic check of PEP8 in your editor.
",d93ac8d8a638135c5161a13ab844159814a9f433,"(26, '', u'nilearn/input_data/base_masker.py')"
8,pull_request_commit_comment,564,nilearn,nilearn,AlexandreAbraham,2015-04-29 13:54:39,"Not PEP8.
",d93ac8d8a638135c5161a13ab844159814a9f433,"(29, '', u'nilearn/input_data/base_masker.py')"
9,pull_request_commit_comment,564,nilearn,nilearn,kshmelkov,2015-04-29 13:54:51,"May be put it outside ""if"" clause as it repeats in both branches?
",d93ac8d8a638135c5161a13ab844159814a9f433,"(18, '', u'nilearn/input_data/base_masker.py')"
10,pull_request_commit_comment,564,nilearn,nilearn,AlexandreAbraham,2015-04-29 13:55:13,"Why is this line in the condition? Since it is always done, it should be above.
",d93ac8d8a638135c5161a13ab844159814a9f433,"(19, '', u'nilearn/input_data/base_masker.py')"
4,issue_comment,564,nilearn,nilearn,GaelVaroquaux,2015-04-29 13:57:42,"Hadn't we decided that our plotting should support 4D and that we should forget about the squeeze idea. 
",nan,nan
11,pull_request_commit_comment,564,nilearn,nilearn,lesteve,2015-04-29 14:04:39,"unnecessary backslash at the end of the line?
",d93ac8d8a638135c5161a13ab844159814a9f433,"(28, '', u'nilearn/input_data/tests/test_nifti_masker.py')"
6,issue_comment,564,nilearn,nilearn,AlexandreAbraham,2015-04-29 14:21:28,"Closing since we fixed that by making plotting function accept 4d image.
",nan,nan
12,pull_request_commit_comment,564,nilearn,nilearn,eickenberg,2015-04-29 14:39:28,"This could be made into a docstring
",d93ac8d8a638135c5161a13ab844159814a9f433,"(15, '', u'nilearn/input_data/base_masker.py')"
5,issue_comment,564,nilearn,nilearn,eickenberg,2015-04-29 14:41:54,"Oops, guess I'm late to the game, never mind.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,460,nilearn,nilearn,bcipolli,2015-02-24 10:48:58,"I debugged this for a while, and the introduction of the 4th dimenions occurs in `check_niimgs`, which converts a 3D image to 4D (even when `allow_3D=True`).  Once that's done, there's no way to return a 1D vector from `transform`, and so `inverse_transform` also must return 4D.

Not sure if there is any simple fix.
",nan,nan
4,issue_comment,460,nilearn,nilearn,AlexandreAbraham,2015-02-24 12:43:57,"We are aware of that and this point is still under discussion. We couldn't come with a satisfying answer yet.
",nan,nan
5,issue_comment,460,nilearn,nilearn,GaelVaroquaux,2015-02-24 15:06:31,"Well, the problem is that there is intrinsically a loss of information:
the output of transform must be 2D to obey scikit-learn's convention.
Thus a 3D (n_x, n_y, n_z) image and a 4D (n_x, n_y, n_z, 1) image are
cast to the same 'X' matrix. For one of these two, 
inverse_transform(transform()) will fail to give the same shape as the
original.

We are open to changing the current convention, ie to always cast to 4D,
if you give us good arguments.
",nan,nan
6,issue_comment,460,nilearn,nilearn,AlexandreAbraham,2015-04-17 07:33:48,"@GaelVaroquaux it is the opposite, we always return a 4D image. I think that we can close this issue now. The question is: should we still return 4D images or should we squeeze it to 3D if there is only one volume?
",nan,nan
7,issue_comment,460,nilearn,nilearn,GaelVaroquaux,2015-05-11 05:12:06,"Closing this as won't fix: we have decided that consistency in the sense of always returning the same ouptut shape was more important.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
12,issue_comment,566,nilearn,nilearn,eickenberg,2015-04-30 11:59:38,"For reference https://github.com/nilearn/nilearn/blob/master/nilearn/_utils/niimg.py#L57

+1 for exposing. Should take into account  #380 as best as possible.

However, to me the signature should rather stay as it is (or even be `new_img_like(ref_img, data=None, affine=None, copy_header=)`, but I am not sure whether this default is useful in any way). The command reads like a phrase: `new_img_like` _what_, so the _what_ should be the first argument.
",nan,nan
3,issue_comment,566,nilearn,nilearn,GaelVaroquaux,2015-04-30 12:01:05,"> However, to me the signature should rather stay as it is (or even be
> new_img_like(ref_img, data=None, affine=None, copy_header=), but I am not sure
> whether this default is useful in any way). The command reads like a phrase:
> new_img_like what, so the what should be the first argument.

OK.
",nan,nan
13,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-04-30 12:15:16,"> I find myself using new_img_like

Me too.

> I suggest that we make ""affine"" optional in it

Same remark, I was planning to do a PR about that later.

> I suggest that we change the signature

I prefer to keep data and affine next to each other if possible, makes more sense to me. If we are to change the signature, I suggest that we change the name because I think of this function call as a sentence ""I want a new image like `param1` containing data `param2`"". And it would make less sense the other way around.
",nan,nan
15,issue_comment,566,nilearn,nilearn,lesteve,2015-04-30 12:30:24,"> new_img_like what, so the what should be the first argument.

Agreed.
",nan,nan
14,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-04-30 12:37:53,"Didn't read Michael's comment first, sorry for repetition.
",nan,nan
6,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-05-18 08:35:35,"I think that this issue is not very time-consuming and people are strongly asking for it. When do you plan to do the PR?
",nan,nan
4,issue_comment,566,nilearn,nilearn,GaelVaroquaux,2015-05-18 09:29:22,"> I think that this issue is not very time-consuming and people are strongly
> asking for it. When do you plan to do the PR?

It's not going to happen any time soon. I have a lot of other urgent
matters to attend to.
",nan,nan
7,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-05-18 09:38:16,"Should we delegate to somebody else, @KamalakerDadi for example ?
",nan,nan
8,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-05-18 09:45:17,"@banilo, would you like to take care of that?
",nan,nan
9,issue_comment,566,nilearn,nilearn,banilo,2015-05-18 09:48:56,"Sure, I would be happy to take care of it, if nobody objects.

2015-05-18 11:45 GMT+02:00 Alexandre Abraham notifications@github.com:

> @banilo https://github.com/banilo, would you like to take care of that?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/nilearn/nilearn/issues/566#issuecomment-102997841.

## 

Viele Grüße,
Danilo
",nan,nan
5,issue_comment,566,nilearn,nilearn,GaelVaroquaux,2015-05-18 09:50:52,"> Sure, I would be happy to take care of it, if nobody objects.

Go for it!
",nan,nan
10,issue_comment,566,nilearn,nilearn,AlexandreAbraham,2015-05-18 09:56:46,"You are now officially assigned :rocket:
",nan,nan
11,issue_comment,566,nilearn,nilearn,banilo,2015-07-13 14:30:20,"This issue should essentially have been addressed.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
4,issue_comment,567,nilearn,nilearn,eickenberg,2015-04-30 15:22:57,"-1000

> No results found for ""function argument passed on to"".

1) ""Passed to"" is perfectly fine (cf ""passed by reference"", ""passed by value"" also)
2) check your google search - it probably took away the quotes. If you take away the quotes you get 121e6 results. If you keep them, you get 0.
",nan,nan
7,issue_comment,567,nilearn,nilearn,banilo,2015-04-30 15:26:48,"> -1000

thesis! ;)

But, you are probably right. Hm...
",nan,nan
5,issue_comment,567,nilearn,nilearn,eickenberg,2015-04-30 15:38:27,"sorry to thwart your efforts to be top contributor to nilearn wrt lines commited measure ;)
",nan,nan
6,issue_comment,567,nilearn,nilearn,lesteve,2015-04-30 16:30:32,":confused: did you read [that](https://github.com/nilearn/nilearn/pull/562/files#r29421198)? And have you looked at your commit history + diff ?

Closing this one as a pure :trollface: 
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,463,nilearn,nilearn,lesteve,2015-02-26 07:43:07,"Looks like a bug to me, a simple fix would be to use itertools.tee to consume the first item but still be able to return the unadulterated iterator. Adding a test would be great too.
",nan,nan
4,issue_comment,463,nilearn,nilearn,AlexandreAbraham,2015-02-26 11:54:54,"@bcipolli thanks for spotting this one. By digging in this code, we found out that there is some unconsistent behavior in both `check_niimg` and `check_niimgs`. We want to release soon so we'll fix this one first but we will open a discussion about image loading later.
",nan,nan
5,issue_comment,463,nilearn,nilearn,lesteve,2015-02-26 14:07:30,"Hmmm it looks like the check_niimg(s) function are not very iterator friendly in contrary to what the docstring is saying. 

Note this has been the case for a while, and is not specific to the relatively recent return_iterator=True in check_niimgs. To make matters worse, I wasn't able to find tests with check_niimg(s) and iterators.

A couple of examples I just found:

``` python
import numpy as np
from nibabel import Nifti1Image

from nilearn import _utils

affine = np.eye(4)
img_3d = Nifti1Image(np.ones((10, 10, 10)), affine)

input_iterator = iter([img_3d, img_3d])
img_4d = _utils.check_niimgs(input_iterator)  # Exception in concat_niimgs

input_iterator = iter([img_3d, img_3d])
img_4d = _utils.check_niimg(input_iterator)
img_4d.shape  # (10, 10, 10, 1) instead of (10, 10, 10, 2)
```

The safe way to use check_niimg(s) seems to use lists rather than iterators as arguments and I bet that's the way they are used in our source code.
",nan,nan
6,issue_comment,463,nilearn,nilearn,AlexandreAbraham,2015-02-26 14:14:28,"Since we plan to refactor `check_niimg*`, I suggest that we convert iterators into lists and move on until the code is refactored.
",nan,nan
7,issue_comment,463,nilearn,nilearn,banilo,2015-02-27 08:49:56,"> Since we plan to refactor check_niimg*

:+1:
",nan,nan
8,issue_comment,463,nilearn,nilearn,AlexandreAbraham,2015-04-08 08:57:53,"The first bug evoked by ben is now solved. Here is a new script to test the second one:

``` python
from nilearn import datasets
from nilearn.image import iter_img, index_img
from nilearn._utils.niimg_conversions import check_niimg_4d

haxby_dataset = datasets.fetch_haxby_simple()
func_img_1 = index_img(haxby_dataset.func, 0)

# This works
print(list(check_niimg_4d([func_img_1], return_iterator=True)))

# This throws an error
check_niimg_4d(iter_img([func_img_1]))
```
",nan,nan
9,issue_comment,463,nilearn,nilearn,GaelVaroquaux,2015-04-15 11:07:53,"What's the status of this guy? Do we have pending work that tries to fix the second bug?
",nan,nan
10,issue_comment,463,nilearn,nilearn,AlexandreAbraham,2015-04-15 11:10:50,"#542 fixes the second bug but still has some dirty code and needs review.
",nan,nan
11,issue_comment,463,nilearn,nilearn,GaelVaroquaux,2015-04-15 11:12:32,"OK, #542 is fixing 2 critical bugs. So I think that we should try to finish it and merge it before the release.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,480,nilearn,nilearn,AlexandreAbraham,2015-03-04 01:15:53,"Do you have a log of the crash? Something related to memory I guess. If the error cannot be catched (this is the case I guess) we should put a refernce to that issue somewhere so that people can google it.
",nan,nan
4,issue_comment,480,nilearn,nilearn,lesteve,2015-03-04 07:50:37,"MemoryError is the likely culprit. Off the top of my head, on Windows there is something like a 2GB limit on 32 bit processes, which is very likely to be exceeded by nilearn.
",nan,nan
5,issue_comment,480,nilearn,nilearn,GaelVaroquaux,2015-05-11 13:00:47,"Fixed by #581
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
3,issue_comment,431,nilearn,nilearn,surchs,2015-02-16 01:18:55,"Awesome. This is what I needed. I'm happy to help with the example. Let me know how I could help.

Best,
Seb
",nan,nan
4,issue_comment,431,nilearn,nilearn,lesteve,2015-02-16 08:07:37,"> We should do an example on this.

There are a few examples using index_img and iter_img. 

```
$ git grep -lP 'index_img|iter_img' examples/
examples/connectivity/plot_canica_resting_state.py
examples/connectivity/plot_ica_resting_state.py
examples/decoding/plot_haxby_searchlight.py
examples/manipulating_visualizing/plot_mask_computation.py
examples/plot_nifti_simple.py
```

Are you saying we should add something like this in a simpler example for example the plot_nilearn_101.py one?
",nan,nan
5,issue_comment,431,nilearn,nilearn,lesteve,2015-02-16 11:53:54,"> Yes,  I have in mind a specific example for that: plotting 4d images.

@surchs you are more than welcome to put together an example showing how to plot 4d images with index_img and possibly iter_img.

It should go in examples/manipulating_visualizing and you can use datasets.fetch_nyu_rest (as in examples/plot_nifti_simple.py) to have a 4d image that you can then slice.
",nan,nan
 , , , , , , , , , 
 , , , , , , , , , 
